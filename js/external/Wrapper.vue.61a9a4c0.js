import{_ as Q}from"./nuxt-icon.vue.2d6fd5e1.js";/* empty css                      */import{_ as Z,a as tt,b as et}from"./MarketPriceInfo.vue.f18b882a.js";import{_ as st}from"./MarketCapInfo.vue.a9d5ed0d.js";import{_ as at,a as ot}from"./Share.vue.fc01699f.js";import{u as nt}from"./useClickOutsideUpdated.43723e42.js";import{u as M,l as j,j as it,$ as rt,d as lt}from"./utils.11774da7.js";import{d as W,aI as ct,r as _,aC as Y,o as s,c,e as a,F as z,j as K,f as C,w as q,k as b,n as dt,h as p,b as o,g as G,t as I,aR as ut,a as E,c4 as V}from"./entry.8bd29e6a.js";import{_ as mt}from"./InfoTooltip.vue.739990f2.js";/* empty css                        */import{_ as pt}from"./nuxt-link.a6eea277.js";const _t={class:"mt-8"},gt={key:0,class:"flex gap-1 w-full mb-6"},ft=o("div",{class:"w-full h-full"},null,-1),ht={class:"font-bold"},kt={class:"font-bold"},yt=W({__name:"IndustryDiagram",props:{industriesCount:{}},setup(J){const A=M(),{individualSectorIndex:g}=ct(A),l=_(Array),d=_(0),L={XLB:"#B28B33",XLC:"#EB38B8",XLY:"#C438EB",XLP:"#F97316",XLE:"#F59E0B",XLV:"#FF342A",XLF:"#1371EC",XLI:"#9191B1",XLRE:"#2395D5",XLK:"#6A38EB",XLU:"#00C0B6"},D=u=>{ut.post("/graphql",{query:`query INDUSTRIES_DATA {
    industries(filter: {industryIds: [${u}]}) {
        nodes {
        id
        name
            stocksAggregate { totalStocks }
        }
    }
}`}).then(n=>{d.value=j.sumBy(n.data.data.industries.nodes,e=>e.stocksAggregate.totalStocks),l.value=j.sortBy(n.data.data.industries.nodes,e=>e.stocksAggregate.totalStocks).map((e,i,t)=>({id:e.id,name:e.name,slug:g.value.sector_industries.data.find(r=>r.attributes.related_industry.value===e.id).attributes.slug,width:`${e.stocksAggregate.totalStocks*100/d.value}%`,opacity:.05*(t.length-i-1)<1?1-.05*(t.length-i-1):.05}))})};return Y(()=>g,u=>{var e,i,t;const n=(t=(i=(e=u.value)==null?void 0:e.sector_industries)==null?void 0:i.data.map(r=>`"${r.attributes.related_industry.value}"`))==null?void 0:t.toString(",");n&&D(n)},{deep:!0}),(u,n)=>{const e=mt,i=pt;return s(),c("div",_t,[a(l).length?(s(),c("ul",gt,[(s(!0),c(z,null,K(a(l),t=>(s(),C(i,{key:t.id,to:`/markets/industries/${t.slug}`,class:"h-[30px] md:h-[60px] bg-[#F59E0B]",style:dt({width:t.width,opacity:t.opacity,backgroundColor:L[a(g).symbol]})},{default:q(()=>[b(e,{title:t.name,class:"w-full h-full"},{item:q(()=>[ft]),_:2},1032,["title"])]),_:2},1032,["to","style"]))),128))])):p("",!0),o("p",null,[G("Composed of "),o("span",ht,I(u.industriesCount)+" industries",1),G(" and "),o("span",kt,I(a(d))+" Companies",1)])])}}}),vt={class:"pb-10"},xt={class:"text-right p-2 text-xs leading-none text-time-grey"},St={class:"pt-4 lg:pt-[29px]"},wt=["onClick"],Ct={class:"pt-3 flex flex-col lg:flex-row justify-between"},bt={class:"pt-3 flex flex-col lg:flex-row lg:items-center justify-between"},It={class:"mb-4 lg:mb-0 lg:w-5/12"},Dt={class:"text-xs leading-4 text-secondary-text"},$t={key:0,class:"flex flex-col xl:flex-row lg:w-7/12 justify-end items-end xl:items-start"},Bt={key:0},jt=W({__name:"Wrapper",props:{parent:{},headData:{}},setup(J){const A=it(),g=E(()=>rt()),l=M(),d=E(()=>l.getIndividualSectorIndex),L=E(()=>l.getStocksComponents),D=_(""),u=_([{id:3,icon:"share",title:"Share/Export"}]),n=_(!1),e=_(),i=t=>{switch(t.title){case V.ADD_TRIGGER:A.setTriggerFlow(!0);break;case V.SHARE:n.value=!n.value;break}};return Y(()=>l.getStocksComponents,t=>{var $;const r=($=l.getStocksComponents)==null?void 0:$.nodes;if(r!=null&&r.length){const f=r.reduce((h,k)=>{var y,v,x,S;const m=(v=(y=k==null?void 0:k.annualIncome)==null?void 0:y.incomeStatements)==null?void 0:v.nodes,B=(m==null?void 0:m.length)>=2?lt((x=m[0])==null?void 0:x.totalRevenue,(S=m[1])==null?void 0:S.totalRevenue):"";return B?{sum:h.sum+parseFloat(B),count:h.count+1}:h},{sum:0,count:0});f.count&&(D.value=(f.sum/f.count).toFixed(2)+"%")}}),nt(e,()=>n.value=!1),(t,r)=>{var y,v,x,S,F,T,N,R,X,O,P,H,U;const $=Q,f=Z,h=et,k=st,m=tt,B=at;return s(),c("section",vt,[o("div",xt,"Updated: "+I(a(g)),1),o("div",St,[o("div",{class:"flex items-center relative w-max",ref_key:"shareWrap",ref:e},[(s(!0),c(z,null,K(a(u),w=>(s(),c("div",{class:"w-fit flex items-center p-1 pl-[5px] text-primary text-xs font-medium cursor-pointer mr-5 last-of-type:mr-0",key:w.id,onClick:At=>i(w)},[w.icon?(s(),C($,{key:0,class:"mr-[5px] shrink-0 w-[14px]",name:`img/pages/company/${w.icon}`},null,8,["name"])):p("",!0),o("span",null,I(w.title),1)],8,wt))),128)),a(n)?(s(),C(ot,{key:0})):p("",!0)],512),o("div",Ct,[b(f,{"head-data":t.headData,class:"mb-5 lg:mb-0"},null,8,["head-data"]),t.headData.hideStatistic?p("",!0):(s(),C(h,{key:0}))]),o("div",bt,[o("div",It,[o("p",Dt,I(t.headData.description),1)]),t.headData.hidePriceInfo?p("",!0):(s(),c("div",$t,[b(k,{pte:((x=(v=(y=a(d))==null?void 0:y.security)==null?void 0:v.pte)==null?void 0:x.toFixed(2))||"N/A",ptb:((T=(F=(S=a(d))==null?void 0:S.security)==null?void 0:F.ptb)==null?void 0:T.toFixed(2))||"N/A","sales-growth":a(D)||"N/A","is-loading":(N=a(L))==null?void 0:N.isLoading},null,8,["pte","ptb","sales-growth","is-loading"]),b(m)]))]),t.parent==="sector"?(s(),c("div",Bt,[b(yt,{"industries-count":(O=(X=(R=a(d))==null?void 0:R.sector_industries)==null?void 0:X.data)==null?void 0:O.length},null,8,["industries-count"])])):p("",!0),t.headData.hideGlance?p("",!0):(s(),C(B,{key:1,"ratings-data":(P=t.headData)==null?void 0:P.ratingsData,"alignment-data":{annual:(H=t.headData)==null?void 0:H.annualDimensionalAlignments,quarterly:(U=t.headData)==null?void 0:U.quarterlyDimensionalAlignments}},null,8,["ratings-data","alignment-data"]))])])}}});export{jt as _};