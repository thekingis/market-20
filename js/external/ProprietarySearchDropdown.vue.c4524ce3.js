import{_ as g}from"./SmallLoader.a34eb8b6.js";import{u as x}from"./useClickOutside.6904fd8d.js";import{u as k}from"./utils.11774da7.js";import{d as S,r as u,aB as w,aC as C,o as a,c,b as d,e as o,k as B,h as p,F as L,j as N,t as O}from"./entry.8bd29e6a.js";const $={class:"relative"},F={class:"flex items-center border-[1px] border-secondary-text rounded-md py-3.5 px-4","data-chart-search":""},I=["src"],V=["placeholder"],j=["src"],D={key:0,class:"absolute z-10 bg-white border-secondary-text border-[1px] rounded-md mt-2 max-h-[300px] w-full overflow-auto"},T={key:0,class:"flex justify-center"},z=["onClick"],E={key:2,class:"text-center p-[18px] text-base text-time-grey"},H=S({__name:"ProprietarySearchDropdown",props:{placeholder:{default:""}},emits:["symbol-select"],setup(M){const r=u(!1),l=u(!1),{clickOutSideBySelector:v,isClickedOutsideBySelector:m}=x(),_=k(),n=u([]),h=u("");let f;const y=t=>{clearTimeout(f),l.value=!0,f=setTimeout(async()=>{var s,i;if(t.target.value){const{data:e}=await _.fetchSearchStocks((s=t.target.value)==null?void 0:s.trim(),"",!0);e?n.value=(i=e==null?void 0:e.stocks)==null?void 0:i.nodes:n.value=[]}l.value=!1},500)};return w(()=>{v("[data-chart-search]")}),C(()=>m.value,()=>{var t;r.value=m.value,r.value&&((t=h.value)==null||t.focus())}),(t,s)=>{const i=g;return a(),c("div",$,[d("div",F,[d("img",{src:"/img/pages/overview/search.svg",alt:"search"},null,8,I),d("input",{ref_key:"searchInput",ref:h,class:"bg-transparent text-base text-time-grey w-full ml-2",placeholder:t.placeholder,type:"text",onFocusin:s[0]||(s[0]=e=>r.value=!0),onInput:y},null,40,V),d("img",{onClick:s[1]||(s[1]=e=>r.value=!o(r)),class:"cursor-pointer",src:"/img/pages/overview/arrow-search.svg",alt:"search"},null,8,j)]),o(r)?(a(),c("div",D,[o(l)?(a(),c("div",T,[B(i)])):p("",!0),o(n).length&&!o(l)?(a(!0),c(L,{key:1},N(o(n),(e,b)=>(a(),c("button",{key:b,onClick:P=>t.$emit("symbol-select",e.symbol),class:"w-full hover:bg-icon-bg cursor-pointer last-of-type:border-0 border-b-[1px] border-mischka p-[18px] text-left text-base text-time-grey"},O(e.symbol),9,z))),128)):o(l)?p("",!0):(a(),c("p",E,"Nothing found"))])):p("",!0)])}}});export{H as _};