import{_ as ae}from"./SmallLoader.a34eb8b6.js";import{_ as ie}from"./nuxt-icon.vue.2d6fd5e1.js";/* empty css                      */import{_ as de}from"./RatioBox.vue.9254e0d8.js";import{d as K,m as W,r as S,aB as te,o as r,c as u,b as n,t as $,e as a,F as Y,j as q,f as B,a as X,h as N,v as re,k as O,bR as Q,b3 as Z,ax as V,aC as J,q as le,w as ce,aT as me,i as ee,y as ue,g as pe}from"./entry.8bd29e6a.js";import{_ as se}from"./ThreeCircleDropBtn.vue.c33fc0c3.js";import{f as j,j as ve,u as oe}from"./utils.11774da7.js";import{_ as ge}from"./index.3f0d1896.js";import{_ as _e}from"./_plugin-vue_export-helper.c27b6911.js";const he={class:"sm:flex items-center"},fe={class:"text-sm font-normal text-secondary-text"},ye=n("span",{class:"text-xs font-normal text-footer-nav pr-2"},"See All Events",-1),xe=["src"],be={class:"flex items-center mt-8 mb-2"},De=K({__name:"UpcomingHead",props:{nextDate:{},nextDateDividends:{},nextDateEarnings:{}},emits:["select-ratio"],setup(R,{emit:C}){const h=W(),E=S([{active:!0,title:"Earnings",id:"earnings"},{active:!1,title:"Dividends",id:"dividends"}]),v=_=>{E.value=E.value.map(c=>({...c,active:c.id===_})),C("select-ratio",_)},f=_=>h.setUpcomingEventOpen(!0,_);return te(()=>{var _;C("select-ratio",((_=E.value.find(c=>c.active))==null?void 0:_.id)||"dividends")}),(_,c)=>{const g=de;return r(),u("div",null,[n("div",he,[n("span",fe," Which companies will announce "+$(a(E).find(p=>p.active).title)+" in the next days? ",1),n("button",{onClick:c[0]||(c[0]=p=>f(_.nextDate)),class:"flex items-center border-[1px] border-grey-bg-footer rounded-full px-2 py-1 sm:ml-2 sm:mt-0 mt-2"},[ye,n("img",{src:"/img/pages/overview/arrow-right-up.svg",alt:"arrow"},null,8,xe)])]),n("div",be,[(r(!0),u(Y,null,q(a(E),p=>(r(),B(g,{class:"flex items-center mr-6",key:p,active:p.active,name:"ratio",label:p.title,onSelectRatio:k=>v(p.id)},null,8,["active","label","onSelectRatio"]))),128))])])}}}),we={key:0,class:"w-full border-[1px] border-mischka min-w-[700px]"},$e={class:"bg-icon-bg border-[1px] border-grey-bg-footer"},Ee=n("th",{class:"w-2/12"},null,-1),Se=n("th",{class:"w-2/12"},[n("span",{class:"py-3 block text-grey-white font-semibold text-xs leading-4"},"PRICE")],-1),Ce={key:0,class:"w-2/12"},Ae=n("span",{class:"text-grey-white font-semibold text-xs leading-4"},"% Change",-1),Pe=[Ae],Ue={class:"w-3/12"},Ie={class:"text-center text-grey-white font-semibold text-xs leading-4"},Te={key:1,class:"w-2/12"},Le=n("span",{class:"text-center text-grey-white font-semibold text-xs leading-4"},"EX-DIVIDEND DATE",-1),ke=[Le],Me=n("th",{class:"w-1/12"},null,-1),Ne={class:"py-5 flex items-center ml-6"},Ve=["src","alt"],Re={class:"ml-1"},Oe={class:"texs-sm font-semibold text-footer-nav leading-[14px]"},Ye={class:"text-[8px] text-grey-white font-normal"},qe={class:"flex items-center justify-center"},je={class:"flex justify-end"},Be={key:1,class:"text-sm font-normal text-secondary-text"},Ke=K({__name:"UpcomingTableEarning",props:{tableData:{default:()=>[]},isDividends:{type:Boolean,default:!1}},setup(R){const C=W(),h=X(()=>C.getTheme),E={"simple-value":Q(()=>Z(()=>import("./TableItemSimpleValue.2ecaa3e3.js"),["./TableItemSimpleValue.2ecaa3e3.js","./entry.8bd29e6a.js","./entry.4e22f1d3.css"],import.meta.url)),"item-change":Q(()=>Z(()=>import("./TableItemChange.db57ebae.js"),["./TableItemChange.db57ebae.js","./entry.8bd29e6a.js","./entry.4e22f1d3.css"],import.meta.url)),tag:Q(()=>Z(()=>import("./TableItemTag.fcb0c093.js"),["./TableItemTag.fcb0c093.js","./entry.8bd29e6a.js","./entry.4e22f1d3.css"],import.meta.url)),date:Q(()=>Z(()=>import("./TableItemDate.55afce84.js"),["./TableItemDate.55afce84.js","./entry.8bd29e6a.js","./entry.4e22f1d3.css"],import.meta.url))},v=S([{id:"1",title:"Add to Watchlist",icon:"img/components/three-circle-drop-btn/add",needPremium:!1},{id:"2",title:"+Add to Google Calendar",icon:"img/pages/overview/google-calendar",needPremium:!1},{id:"3",title:"Download iCal",icon:null,needPremium:!1}]);return(f,_)=>{var g;const c=se;return(g=f.tableData)!=null&&g.length?(r(),u("table",we,[n("thead",null,[n("tr",$e,[Ee,Se,f.isDividends?N("",!0):(r(),u("th",Ce,Pe)),n("th",Ue,[n("span",Ie,"UPCOMING "+$(f.isDividends?"DIVIDENDS":"EARNINGS"),1)]),f.isDividends?(r(),u("th",Te,ke)):N("",!0),Me])]),n("tbody",null,[(r(!0),u(Y,null,q(f.tableData,p=>{var k;return r(),u("tr",{key:p.id,class:"border-b-[1px] border-mischka"},[n("td",null,[n("div",Ne,[(k=p.icon)!=null&&k[a(h)]?(r(),u("img",{key:0,class:"h-12 w-12 rounded-[10px] object-contain mr-1",width:"40",height:"40",src:p.icon[a(h)],alt:p.symbol},null,8,Ve)):N("",!0),n("div",Re,[n("p",Oe,$(p.symbol),1),n("p",Ye,$(p.name),1)])])]),(r(!0),u(Y,null,q(p.items,D=>(r(),u("td",null,[n("div",qe,[(r(),B(re(E[D.componentKey]),{item:D},null,8,["item"]))])]))),256)),n("td",null,[n("div",je,[O(c,{items:a(v),isDividends:f.isDividends,"table-item":p},null,8,["items","isDividends","table-item"])])])])}),128))])])):(r(),u("p",Be," No one companies will announce "+$(f.isDividends?"dividends":"earnings")+" in the next days. ",1))}}}),We=n("p",{class:"text-[14px] font-bold mb-1 text-black"},"Details",-1),He={key:0,class:"w-full border-[0] border-mischka mt-3"},Ge={class:"bg-icon-bg border-b-[1px] border-t-[1px] border-mischka"},ze={class:"font-semibold text-grey-white text-xs text-left p-1"},Fe={class:"flex items-center p-1"},Xe=["src","alt"],Je={class:"ml-1"},Qe={class:"texs-sm font-semibold text-footer-nav leading-[14px]"},Ze={class:"flex justify-end items-center p-1"},et={class:"text-sm text-footer-nav font-medium"},tt={class:"flex justify-end items-center p-1"},nt={class:"text-sm text-footer-nav font-medium"},it={key:1,class:"w-full border-[0] border-mischka mt-3"},st={class:"bg-icon-bg border-b-[1px] border-t-[1px] border-mischka"},ot={class:"font-semibold text-grey-white text-xs text-left p-1"},at={class:"flex items-center p-1"},dt=["src","alt"],rt={class:"ml-1"},lt={class:"texs-sm font-semibold text-footer-nav leading-[14px]"},ct=K({__name:"DatePicker",props:{modelValue:{default:""},options:{default:void 0},focusDate:{},dividendsData:{default:()=>[]},earningsData:{default:()=>[]}},emits:["update:modelValue","update:pageChange"],setup(R,{emit:C}){const h=R,E=W(),v=X(()=>E.getTheme),f=S(),_=X(()=>E.getTheme),c={dividends:["Dividends","Amount","Yield"],earnings:["Earnings"," "," "]},g=S([{key:"today",highlight:{style:{backgroundColor:"lightgrey",borderRadius:"50%"},contentStyle:{color:"black"}},dates:[new Date]},{dates:[],dot:{style:{background:"#6A38EB",position:"absolute",top:0,right:0}},popover:{visibility:"hover",placement:"right-start",isInteractive:!1,hideDelay:""}},{dates:[],dot:{style:{background:"#1ba2d4",position:"absolute",top:0,right:0}},popover:{visibility:"hover",placement:"right-start",isInteractive:!1,hideDelay:""}}]),p=S({highlight:{style:{backgroundColor:"#6A38EB",color:"white",borderRadius:"50%"},contentStyle:{color:"white"}}});S([]);const k=(m,o)=>m<=640?1:m<1025?2:o,D=()=>{var m;f.value=k(window.innerWidth,((m=h==null?void 0:h.options)==null?void 0:m.columns)||1)},A=()=>{setTimeout(()=>{document.querySelectorAll(".vc-title").forEach(m=>{var o;m.classList.contains("vc-title--split")||(m.innerHTML=((o=m.textContent)==null?void 0:o.split(" ").map(y=>`<span>${y}</span>`).join(" "))||m.innerHTML,m.classList.add("vc-title--split"))})},100)};V();const L=m=>{var o,y,l,M,t;C("update:pageChange",[(y=(o=m[0])==null?void 0:o.days[0])==null?void 0:y.id,(t=(M=m[2])==null?void 0:M.days[((l=m[2])==null?void 0:l.days.length)-1])==null?void 0:t.id]),A()};return J(()=>h.dividendsData,m=>{g.value[1].dates=m.map(o=>V(o.date).toISOString())}),J(()=>h.earningsData,m=>{g.value[2].dates=m.map(o=>V(o.date).toISOString())}),te(()=>{var m;f.value=k(window.innerWidth,((m=h==null?void 0:h.options)==null?void 0:m.columns)||1),window.addEventListener("resize",D),A()}),le(()=>{window.removeEventListener("resize",D)}),(m,o)=>(r(),B(a(ge),{class:"date-picker",borderless:!0,attributes:a(g),expanded:!0,"trim-weeks":!0,"first-day-of-week":2,masks:{weekdays:"WW",title:"MMMM YYYY"},"title-position":"left","is-dark":a(_)===a(me).DARK,columns:a(f),"select-attribute":a(p),modelValue:m.modelValue,onDayclick:o[0]||(o[0]=y=>m.$emit("update:modelValue",y.id)),"onUpdate:pagesOnce":L,onDidMove:L},{"day-popover":ce(({day:y})=>{var l,M,t,e,s,d;return[n("div",null,[We,(M=(l=m.dividendsData)==null?void 0:l.find(i=>y.id===i.date))!=null&&M.stocks?(r(),u("table",He,[n("thead",null,[n("tr",Ge,[(r(!0),u(Y,null,q(c.dividends,i=>(r(),u("th",{key:i},[n("p",ze,$(i),1)]))),128))])]),n("tbody",null,[(r(!0),u(Y,null,q((e=(t=m.dividendsData)==null?void 0:t.find(i=>y.id===i.date))==null?void 0:e.stocks,(i,x)=>{var b,P,U,I,T;return r(),u("tr",{key:x,class:"border-b-[1px] border-mischka"},[n("td",null,[n("div",Fe,[(b=i.logo)!=null&&b[a(v)]?(r(),u("img",{key:0,class:"rounded-full",width:"17",height:"17",src:i.logo[a(v)],alt:i.symbol},null,8,Xe)):N("",!0),n("div",Je,[n("span",Qe,$(i.symbol),1)])])]),n("td",null,[n("div",Ze,[n("span",et,$((U=(P=i==null?void 0:i.dividend)==null?void 0:P.dividend)!=null&&U.amount?a(j)(i.dividend.dividend.amount,i.dividend.dividend.currency):""),1)])]),n("td",null,[n("div",tt,[n("span",nt,$((T=(I=i==null?void 0:i.dividend)==null?void 0:I.yieldPercent)==null?void 0:T.displayAmount),1)])])])}),128))])])):N("",!0),(s=h.earningsData.find(i=>y.id===i.date))!=null&&s.stocks?(r(),u("table",it,[n("thead",null,[n("tr",st,[(r(!0),u(Y,null,q(c.earnings,i=>(r(),u("th",{key:i},[n("p",ot,$(i),1)]))),128))])]),n("tbody",null,[(r(!0),u(Y,null,q((d=h.earningsData.find(i=>y.id===i.date))==null?void 0:d.stocks,(i,x)=>{var b;return r(),u("tr",{key:x,class:"border-b-[1px] border-mischka"},[n("td",null,[n("div",at,[(b=i.logo)!=null&&b[a(v)]?(r(),u("img",{key:0,class:"rounded-full",width:"17",height:"17",src:i.logo[a(v)],alt:i.symbol},null,8,dt)):N("",!0),n("div",rt,[n("span",lt,$(i.symbol),1)])])])])}),128))])])):N("",!0)])]}),_:1},8,["attributes","is-dark","columns","select-attribute","modelValue"]))}});const mt={class:"w-full border-[1px] border-mischka min-w-1/2 mt-3"},ut={class:"bg-icon-bg"},pt={class:"py-5 flex items-center ml-6"},vt=["src","alt"],gt={class:"ml-1"},_t={class:"block texs-sm font-semibold text-footer-nav leading-[14px]"},ht={class:"block text-[12px] text-grey-white font-normal"},ft={class:"flex justify-end items-center pr-6"},yt={key:0},xt={class:"block text-sm text-footer-nav font-medium"},bt={class:"block text-[10px] text-time-grey"},Dt={class:"flex justify-end ml-10"},wt=K({__name:"UpcomingModalTable",props:{headers:{default:()=>[{key:"earnings",title:"EARNINGS"},{key:"previous_earnings",title:"PREVIOUS EARNINGS"}]},tableData:{}},setup(R){const C=W(),h=X(()=>C.getTheme),E=S([{id:"1",title:"Add to Watchlist",icon:"img/components/three-circle-drop-btn/add",needPremium:!1},{id:"2",title:"+Add to Google Calendar",icon:"img/pages/overview/google-calendar",needPremium:!1},{id:"3",title:"Download iCal",icon:null,needPremium:!1}]);return(v,f)=>{const _=se;return r(),u("table",mt,[n("thead",null,[n("tr",ut,[(r(!0),u(Y,null,q(v.headers,(c,g)=>(r(),u("th",{key:c.key,class:"w-1/2"},[n("p",{class:ee([{"text-right pr-6":g===v.headers.length-1},"font-semibold text-grey-white py-3 text-xs text-left pl-6"])},$(c.title),3)]))),128))])]),n("tbody",null,[(r(!0),u(Y,null,q(v.tableData.stocks,(c,g)=>{var p;return r(),u("tr",{key:g,class:"border-b-[1px] border-mischka"},[n("td",null,[n("div",pt,[(p=c.logo)!=null&&p[a(h)]?(r(),u("img",{key:0,class:"h-12 w-12 rounded-[10px] object-contain mr-1",width:"40",height:"40",src:c.logo[a(h)],alt:c.symbol},null,8,vt)):N("",!0),n("div",gt,[n("span",_t,$(c.symbol),1),n("span",ht,$(c.name),1)])])]),n("td",null,[n("div",ft,[v.headers[0].key==="dividends"?(r(),u("div",yt,[n("span",xt,$(c.dividend.dividend.amount?a(j)(c.dividend.dividend.amount,c.dividend.dividend.currency):""),1),n("span",bt,$(c.dividend.yieldPercent.displayAmount),1)])):N("",!0),n("div",Dt,[O(_,{items:a(E),isDividends:!1,"table-item":c},null,8,["items","table-item"])])])])])}),128))])])}}}),$t={class:"flex items-center"},Et={class:"text-lg font-bold mr-5 text-black"},St={class:"flex lg:flex-row flex-col items-start gap-10"},Ct=K({__name:"UpcomingTableWrapper",props:{dateSelected:{default:null},oneDayData:{}},setup(R){const C=R;ue(),ve();const h=[{key:"dividends",title:"DIVIDENDS"},{key:"amount",title:"AMOUNT & YIELD"}],E=[{key:"earnings",title:"EARNINGS"},{key:"date",title:""}],v=S(""),f=_=>{v.value=V(_).format("DD MMM, YYYY")};return J(()=>C.dateSelected,()=>{f(C.dateSelected)}),te(()=>{f(C.dateSelected)}),(_,c)=>{var p,k,D,A;const g=wt;return r(),u("div",null,[n("div",$t,[n("p",Et,$(a(v)),1)]),n("div",St,[(p=_.oneDayData)!=null&&p.earnings?(r(),B(g,{key:0,headers:E,"table-data":(k=_.oneDayData)==null?void 0:k.earnings},null,8,["table-data"])):N("",!0),(D=_.oneDayData)!=null&&D.dividends?(r(),B(g,{key:1,headers:h,"table-data":(A=_.oneDayData)==null?void 0:A.dividends},null,8,["table-data"])):N("",!0)])])}}}),At={name:"UpcomingEmpty"},Pt=n("p",{class:"text-lg font-bold text-black"},"Pick a date to see details ",-1),Ut=["src"];function It(R,C,h,E,v,f){return r(),u("div",null,[Pt,n("img",{class:"w-[119px] py-10 mx-auto",src:"/img/pages/overview/modal-empty.svg",alt:"empty"},null,8,Ut)])}const Tt=_e(At,[["render",It]]),Lt={key:0,class:"fixed top-0 left-0 bg-[#6B728070] w-screen h-screen flex justify-center items-center z-[104]"},kt={ref:"modalBox",class:"flex flex-col bg-white overflow-hidden animation-box rounded-lg max-w-[1300px] w-full px-4 md:px-8 py-6 md:py-[38px] mx-2 max-h-[98vh] max-md:max-h-[88vh] max-md:relative max-md:bottom-[40px]"},Mt={class:"flex items-center justify-between"},Nt={class:"lg:w-1/2"},Vt={class:"flex items-center"},Rt=n("p",{class:"font-bold text-[20px] text-black"},"Upcoming Events",-1),Ot=n("p",{class:"text-sm text-secondary-text mt-1.5"},"Which companies will announce earnings in the next days?",-1),Yt={class:"relative w-1/2 flex justify-end"},qt=["src"],jt={class:"lg:flex mt-6 mb-auto"},Bt={class:"mt-6 border-b-[1px] border-mischka overflow-auto pb-8"},Kt=K({__name:"UpcomingModal",props:{currentItems:{default:()=>[]}},setup(R){const C=R,h=W(),E=oe(),v=S(null),f=X(()=>h.getIsUpcomingEventsOpen),_=S([]),c=S([]),g=S({dividends:void 0,earnings:void 0}),p=D=>{var A,L;v.value=D,g.value.dividends=(A=_.value)==null?void 0:A.find(m=>m.date===D),g.value.earnings=(L=c.value)==null?void 0:L.find(m=>m.date===D)},k=async D=>{const A=await E.fetchUpcomingEventsByPeriod(C.currentItems.map(L=>`"${L}"`),D[0],D[1],!0);if(A){let L=[],m=[];A.map(l=>{var M,t,e,s,d;(t=(M=l==null?void 0:l.weekDividends)==null?void 0:M.nodes)==null||t.map(i=>{const x=L.find(b=>b.date===i.exDate);x?x.stocks.push({id:l.id,symbol:l.symbol,name:l.name,logo:{dark:l.darkLogo,light:l.lightLogo},dividend:i}):L.push({date:i.exDate,stocks:[{id:l.id,symbol:l.symbol,name:l.name,logo:{dark:l.darkLogo,light:l.lightLogo},dividend:i}]})}),(d=(s=(e=l==null?void 0:l.security)==null?void 0:e.weekEarnings)==null?void 0:s.nodes)==null||d.map(i=>{const x=m.find(b=>b.date===i.announcedDate);x?x.stocks.push({id:l.id,symbol:l.symbol,name:l.name,logo:{dark:l.darkLogo,light:l.lightLogo},earnings:i}):m.push({date:i.announcedDate,stocks:[{id:l.id,symbol:l.symbol,name:l.name,logo:{dark:l.darkLogo,light:l.lightLogo},earnings:i}]})})}),_.value=L,c.value=m;const o=_.value.find(l=>l.date===v.value),y=c.value.find(l=>l.date===v.value);o&&(g.value.dividends=o),y&&(g.value.earnings=y)}};return J(()=>h.getFocusDate,D=>{v.value=D}),(D,A)=>{const L=ie,m=ct,o=Ct,y=Tt;return a(f)?(r(),u("div",Lt,[n("div",kt,[n("div",Mt,[n("div",Nt,[n("div",Vt,[Rt,O(L,{class:"text-grey-light-grey block ml-2 w-4 h-4",name:"img/pages/company/info"})]),Ot]),n("div",Yt,[n("button",{onClick:A[0]||(A[0]=l=>a(h).setUpcomingEventOpen(!1)),class:"cursor-pointer relative z-10"},[O(L,{class:"w-3 h-3 text-footer-nav",name:"img/pages/overview/cross-modal"})]),n("img",{class:"absolute z-0 right-[-40px] top-[-60px] opacity-50",src:"/img/pages/overview/test.svg",alt:"polygon"},null,8,qt)])]),n("div",jt,[O(m,{options:{columns:3},focusDate:a(v),"onUpdate:modelValue":p,"onUpdate:pageChange":A[1]||(A[1]=l=>k(l)),"dividends-data":a(_),"earnings-data":a(c)},null,8,["focusDate","dividends-data","earnings-data"])]),n("div",Bt,[a(v)?(r(),B(o,{key:0,"date-selected":a(v),"one-day-data":a(g)},null,8,["date-selected","one-day-data"])):(r(),B(y,{key:1}))])],512)])):N("",!0)}}}),Wt={key:0},Ht={key:1},Gt={class:"sm:flex justify-between font-semibold leading-7 py-4 lg:px-4 px-2 relative"},zt={class:"md:flex items-center"},Ft={class:"text-black"},Xt={class:"bg-deep-cove text-white rounded-full h-6 w-6 flex items-center justify-center ml-2 relative"},Jt={key:0,class:"block h-1.5 w-1.5 outline outline-1 outline-white bg-red rounded-full absolute right-0 top-0"},Qt={class:"flex items-center mr-4 sm:mt-0 mt-2"},Zt={class:"text-xs font-normal text-primary-white pl-1.5 pr-2"},en={class:"py-4 lg:px-4 px-2"},tn={class:"overflow-auto"},un=K({__name:"UpcomingAccordion",props:{stocksSymbolList:{default:()=>{}},mode:{}},setup(R){const C=R,h=S(!0),E=W(),v=S(!1),f=S(""),_={noDate:"There are no events yet",hasDate:"Next Event(s) in "},c=S(null),g=S([{id:1,title:"Upcoming Earnings",count:0,indicator:!1},{id:2,title:"Upcoming Dividends",count:0,indicator:!1}]),p=S({dividends:[],earnings:[]}),k=S(),D=()=>{v.value=!v.value,k.value&&(k.value.style.maxHeight=v.value?"unset":"0")},A=o=>{E.setUpcomingEventOpen(!0,o)},L=oe(),m=o=>{var y,l,M;if(c.value="",g.value[1].count=0,o!=null&&o.length)if(C.mode==="noPeriod")o=o.filter(t=>V(t.date).unix()<=V().add(7,"day").unix()),g.value.find(t=>t.id===2).count=o.filter(t=>{var e;return((e=t==null?void 0:t.event)==null?void 0:e.__typename)==="StockDividend"}).length,g.value.find(t=>t.id===2).indicator=o.filter(t=>{var e;return((e=t==null?void 0:t.event)==null?void 0:e.__typename)==="StockDividend"}).length>0,p.value.dividends=(y=o==null?void 0:o.filter(t=>{var e;return((e=t==null?void 0:t.event)==null?void 0:e.__typename)==="StockDividend"}))==null?void 0:y.map(t=>{var s,d,i,x,b,P,U,I,T,w,H,G,z,F,ne;const e=((i=(d=(s=t.stock)==null?void 0:s.quote)==null?void 0:d.changePercent)==null?void 0:i.trendDirection)==="POSITIVE";return{id:t==null?void 0:t.id,symbol:(x=t==null?void 0:t.stock)==null?void 0:x.symbol,name:(b=t==null?void 0:t.stock)==null?void 0:b.name,icon:{light:(P=t==null?void 0:t.stock)==null?void 0:P.lightLogo,dark:(U=t==null?void 0:t.stock)==null?void 0:U.darkLogo},items:[{key:"price",componentKey:"simple-value",positive:e,hasArrow:!0,value:j((T=(I=t==null?void 0:t.stock)==null?void 0:I.quote)==null?void 0:T.price.amount,(H=(w=t==null?void 0:t.stock)==null?void 0:w.quote)==null?void 0:H.price.currency)},{key:"upcomingDividends",componentKey:"date",item:{top:(z=(G=t==null?void 0:t.event)==null?void 0:G.dividend)==null?void 0:z.displayAmount,bottom:((ne=(F=t==null?void 0:t.event)==null?void 0:F.yieldPercent)==null?void 0:ne.displayAmount)+"%"}},{key:"exDividendDate",componentKey:"date",item:{top:t==null?void 0:t.date}}]}}),g.value.find(t=>t.id===1).count=o.filter(t=>{var e;return((e=t==null?void 0:t.event)==null?void 0:e.__typename)==="CompanyEarning"}).length,g.value.find(t=>t.id===1).indicator=o.filter(t=>{var e;return((e=t==null?void 0:t.event)==null?void 0:e.__typename)==="CompanyEarning"}).length>0,p.value.earnings=(l=o==null?void 0:o.filter(t=>{var e;return((e=t==null?void 0:t.event)==null?void 0:e.__typename)==="CompanyEarning"}))==null?void 0:l.map(t=>{var s,d,i,x,b,P,U,I,T,w,H,G,z,F;const e=((i=(d=(s=t.stock)==null?void 0:s.quote)==null?void 0:d.changePercent)==null?void 0:i.trendDirection)==="POSITIVE";return{id:(x=t==null?void 0:t.stock)==null?void 0:x.id,symbol:(b=t.stock)==null?void 0:b.symbol,name:(P=t.stock)==null?void 0:P.name,icon:{light:(U=t.stock)==null?void 0:U.lightLogo,dark:(I=t.stock)==null?void 0:I.darkLogo},items:[{key:"price",componentKey:"simple-value",positive:e,hasArrow:!0,value:j((w=(T=t==null?void 0:t.stock)==null?void 0:T.quote)==null?void 0:w.price.amount,(G=(H=t==null?void 0:t.stock)==null?void 0:H.quote)==null?void 0:G.price.currency)},{key:"change",componentKey:"item-change",positive:e,value:(((F=(z=t==null?void 0:t.stock)==null?void 0:z.quote)==null?void 0:F.changePercent.mathAmount)*100).toFixed(2)},{key:"earningDate",componentKey:"date",item:{top:t==null?void 0:t.date}}]}}),c.value=V((M=o[0])==null?void 0:M.date);else{g.value.find(e=>e.id===2).count=o.filter(e=>{var s,d;return(d=(s=e.weekDividends)==null?void 0:s.nodes)==null?void 0:d.length}).length,g.value.find(e=>e.id===2).indicator=o.filter(e=>{var s,d;return(d=(s=e.weekDividends)==null?void 0:s.nodes)==null?void 0:d.length}).length>0,p.value.dividends=o.filter(e=>{var s,d;return(d=(s=e.weekDividends)==null?void 0:s.nodes)==null?void 0:d.length}).sort((e,s)=>Number(new Date(e.weekDividends.nodes[0].exDate))-Number(new Date(s.weekDividends.nodes[0].exDate))).map(e=>{var d,i,x,b,P,U,I,T;const s=((i=(d=e.quote)==null?void 0:d.changePercent)==null?void 0:i.trendDirection)==="POSITIVE";return{id:e==null?void 0:e.id,symbol:e.symbol,name:e.name,icon:{light:e.lightLogo,dark:e.darkLogo},items:[{key:"price",componentKey:"simple-value",positive:s,hasArrow:!0,value:j((x=e==null?void 0:e.quote)==null?void 0:x.price.amount,(b=e==null?void 0:e.quote)==null?void 0:b.price.currency)},{key:"upcomingDividends",componentKey:"date",item:{top:j(e==null?void 0:e.weekDividends.nodes.at(-1).dividend.amount,e==null?void 0:e.weekDividends.nodes.at(-1).dividend.currency),bottom:(P=e==null?void 0:e.weekDividends.nodes.at(-1))==null?void 0:P.yieldPercent.displayAmount}},{key:"exDividendDate",componentKey:"date",item:{top:(T=(I=(U=e==null?void 0:e.weekDividends)==null?void 0:U.nodes)==null?void 0:I[0])==null?void 0:T.exDate}}]}}),g.value.find(e=>e.id===1).count=o.filter(e=>{var s,d,i;return(i=(d=(s=e.security)==null?void 0:s.weekEarnings)==null?void 0:d.nodes)==null?void 0:i.length}).length,g.value.find(e=>e.id===1).indicator=o.filter(e=>{var s,d,i;return(i=(d=(s=e.security)==null?void 0:s.weekEarnings)==null?void 0:d.nodes)==null?void 0:i.length}).length>0,p.value.earnings=o.filter(e=>{var s,d,i;return(i=(d=(s=e.security)==null?void 0:s.weekEarnings)==null?void 0:d.nodes)==null?void 0:i.length}).sort((e,s)=>Number(new Date(e.security.weekEarnings.nodes[0].announcedDate))-Number(new Date(s.security.weekEarnings.nodes[0].announcedDate))).map(e=>{var d,i,x,b,P,U,I,T,w;const s=((i=(d=e.quote)==null?void 0:d.changePercent)==null?void 0:i.trendDirection)==="POSITIVE";return{id:e==null?void 0:e.id,symbol:e.symbol,name:e.name,icon:{light:e.lightLogo,dark:e.darkLogo},items:[{key:"price",componentKey:"simple-value",positive:s,hasArrow:!0,value:j((x=e==null?void 0:e.quote)==null?void 0:x.price.amount,(b=e==null?void 0:e.quote)==null?void 0:b.price.currency)},{key:"change",componentKey:"item-change",positive:s,value:(((P=e==null?void 0:e.quote)==null?void 0:P.changePercent.mathAmount)*100).toFixed(2)},{key:"earningDate",componentKey:"date",item:{top:(w=(T=(I=(U=e==null?void 0:e.security)==null?void 0:U.weekEarnings)==null?void 0:I.nodes)==null?void 0:T[0])==null?void 0:w.announcedDate}}]}});const t=Array.prototype.concat(o.filter(e=>{var s,d;return(d=(s=e.weekDividends)==null?void 0:s.nodes)==null?void 0:d.length}).map(e=>e.weekDividends.nodes.map(s=>s.exDate)).flat(1),o.filter(e=>{var s,d,i;return(i=(d=(s=e.security)==null?void 0:s.weekEarnings)==null?void 0:d.nodes)==null?void 0:i.length}).map(e=>{var s;return(s=e.security)==null?void 0:s.weekEarnings.nodes.map(d=>d.announcedDate)}).flat(1)).map(e=>e);c.value=t!=null&&t.length?t==null?void 0:t.reduce((e,s)=>V(s).diff(V(e),"day")<0?s:e):null}h.value=!1};return J(()=>L.getUpcomingEvents,o=>m(o),{deep:!0,immediate:!0}),(o,y)=>{var d,i,x,b,P,U,I,T;const l=ae,M=ie,t=De,e=Ke,s=Kt;return r(),u("div",{class:ee(["rounded-xl",a(v)?"bg-white border-[1px] border-mischka mb-[20px]":"bg-magnolia"])},[a(h)?(r(),u("div",Wt,[O(l,{class:"max-h-[60px] scale-50 m-auto"})])):(r(),u("div",Ht,[n("div",Gt,[n("div",zt,[(r(!0),u(Y,null,q(a(g),w=>(r(),u("div",{key:w.id,class:"mr-7 flex items-center mt-2 sm:mt-0"},[n("p",Ft,$(w.title),1),n("div",Xt,[pe($(w.count)+" ",1),w.indicator?(r(),u("span",Jt)):N("",!0)])]))),128))]),n("div",Qt,[n("button",{onClick:y[0]||(y[0]=w=>A(a(c)?a(V)(a(c)).format("YYYY-MM-DD"):"")),class:"flex items-center"},[O(M,{class:"h-5 w-5 text-primary-white",name:"img/pages/overview/calendar"}),n("span",Zt,$(a(c)?_.hasDate+a(V)(a(c)).format("MMM D"):_.noDate),1)]),n("button",{class:"absolute right-0 top-0 mt-5 mr-1 p-1",onClick:D},[O(M,{class:ee(["rounded-sm w-[16px] cursor-pointer transition-all duration-200 ease-in-out block text-primary-white",{"rotate-[-180deg]":a(v),"rotate-[0deg]":!a(v)}]),name:"img/pages/overview/arrow-primary"},null,8,["class"])])])]),n("div",{class:"max-h-0 overflow-hidden transition-all duration-200 ease-in-out",ref_key:"upcomingAccordion",ref:k},[n("div",en,[O(t,{onSelectRatio:y[1]||(y[1]=w=>f.value=w),"next-date-dividends":(b=(x=(i=(d=a(p))==null?void 0:d.dividends[0])==null?void 0:i.items.find(w=>w.key==="exDividendDate"))==null?void 0:x.item)==null?void 0:b.top,"next-date-earnings":(T=(I=(U=(P=a(p))==null?void 0:P.earnings[0])==null?void 0:U.items.find(w=>w.key==="earningDate"))==null?void 0:I.item)==null?void 0:T.top,"next-date":a(c)?a(V)(a(c)).format("YYYY MM DD"):""},null,8,["next-date-dividends","next-date-earnings","next-date"]),n("div",tn,[O(e,{class:"mt-4","is-dividends":a(f)==="dividends","table-data":a(p)[a(f)]},null,8,["is-dividends","table-data"])])]),O(s,{"current-items":C.stocksSymbolList},null,8,["current-items"])],512)]))],2)}}});export{un as _};