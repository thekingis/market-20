import{_ as Y}from"./nuxt-link.a6eea277.js";import{_ as P}from"./nuxt-icon.vue.2d6fd5e1.js";/* empty css                      */import{_ as Z}from"./SmallSpinnerLoader.vue.0773deb7.js";import{_ as ee}from"./SearchHeaderInput.vue.2d9be000.js";import{u as q}from"./useWatchlistStore.a64354a0.js";import{d as K,m as te,a as J,r as _,aC as V,o as r,c as b,b as s,aH as se,i as M,e as a,n as N,t as w,F as Q,j as oe,aT as ae,f as k,h as $,x as ne,p as le,y as re,z as ce,aB as ie,w as de,g as ue,k as U,aL as me}from"./entry.8bd29e6a.js";import{_ as pe}from"./UpcomingAccordion.vue.2b60c346.js";import{j as fe,u as he,n as xe,t as F,$ as ge}from"./utils.11774da7.js";import{u as _e}from"./useNewsStore.16e48ef7.js";const ve={class:"bg-white shadow-sm border border-solid border-border rounded-[6px] py-2.5 px-3 relative w-auto inline-block"},ye=["src"],ke=["onMouseover"],be=["onClick"],Se={class:"flex items-center"},We=["onClick"],we=K({__name:"DropdownWatchlist",props:{items:{default:()=>[]},selected:{type:[String,Boolean],default:!1},placeholder:{default:"Select a watchlist"},hasSlot:{type:Boolean}},emits:["changeActiveWatchlist"],setup(I,{emit:C}){const A=I,B=te(),z=J(()=>B.getTheme),S=q(),l=_({}),c=_(""),i=_(!1),v=n=>{C("changeActiveWatchlist",n),i.value=!1},y=n=>{S.setIsOpenCreateWatchlist(!0,"edit",n),i.value=!1};return V(()=>A.items,n=>{l.value=n.find(m=>m.selected)},{immediate:!0}),V(()=>S.getCreatedWatchlist,n=>{n&&C("changeActiveWatchlist",n.watchlist)},{immediate:!0}),(n,m)=>{var T,D,h;const L=P;return r(),b("div",ve,[s("button",{class:"flex items-center justify-center cursor-pointer",onClick:m[0]||(m[0]=o=>i.value=!a(i))},[se(n.$slots,"prefix"),s("span",{class:M(["mr-3 text-sm font-medium text-grey whitespace-nowrap flex items-center",n.hasSlot&&"text-black"])},[s("span",{class:M(["h-2.5 w-2.5 block rounded-full mr-1",{"bg-time-grey":!((T=a(l))!=null&&T.color)}]),style:N({background:(D=a(l))==null?void 0:D.color})},null,6),s("span",null,w(((h=a(l))==null?void 0:h.name)||n.placeholder),1)],2),s("img",{src:"/img/search/arrow-down.svg",alt:"arrow down icon"},null,8,ye)]),s("div",{class:M(["max-h-[200px] min-w-[261px] block z-[210] shadow-md overflow-auto absolute border border-solid border-border py-2.5 px-4 right-0 top-full w-full rounded-[6px] bg-white",{hidden:!a(i)}])},[n.items?(r(!0),b(Q,{key:0},oe(n.items,o=>(r(),b("div",{key:o.id,class:"text-sm font-medium py-2 cursor-pointer flex items-center justify-between relative",onMouseover:W=>c.value=o.id,onMouseleave:m[1]||(m[1]=W=>c.value="")},[s("button",{class:"absolute top-0 left-0 w-full h-full text-[0]",onClick:W=>v(o)},w(o==null?void 0:o.name),9,be),s("div",Se,[s("span",{class:"h-[10px] w-[10px] block rounded-full",style:N({background:o==null?void 0:o.color})},null,4),s("span",{class:"block w-[calc(100%-10px)] pl-1.5",style:N({color:z.value===a(ae).DARK?"#ffffff":""})},w(o==null?void 0:o.name),5)]),s("div",{class:M(["flex items-center ml-auto",{invisible:a(c)!==o.id&&!o.selected}])},[s("button",{onClick:W=>y(o),class:"underline underline-offset-2 text-secondary-text text-sm mr-2 relative z-[1]"}," Edit ",8,We)],2),o.selected?(r(),k(L,{key:0,name:"img/pages/watchlist/selected",class:"text-green w-[15px] h-[15px]"})):$("",!0)],40,ke))),128)):$("",!0)],2)])}}}),$e={class:"mt-20"},Ce={class:"relative mb-7 flex flex-wrap items-center gap-6"},Ae=s("span",{class:"text-primary text-xs font-medium pl-1"},"Add Stock",-1),Be={class:"lg:flex justify-between"},Te={class:"lg:flex"},De=s("p",{class:"text-3xl font-bold text-footer-nav mr-5"},"Watchlists",-1),Me={class:"text-time-grey text-xs leading-3"},Ve=s("p",{class:"text-[18px] mt-1 font-light text-secondary-text"},"Collections of stocks you wish to keep track",-1),ze={class:"flex items-center lg:mt-0 mt-3"},Le=s("span",{class:"text-primary text-xm font-medium pl-3"},"New Watchlist",-1),Pe=K({__name:"Wrapper",props:{showGoBackLink:{type:Boolean,default:!1}},emits:["changeActiveWatchlist"],setup(I,{emit:C}){const A=ne(),B=le(),z=re(),S=fe(),l=q(),c=_([]),i=_(null),v=_(""),y=he(),n=xe(),m=_e(),L=ce(),T=async e=>{var t,d,x;if(e){c.value=c.value.map(p=>({...p,selected:p.id===e.id})),y.$reset(),m.$reset();const g=(t=B.query)==null?void 0:t.tag,u=F(((x=(d=l.getWatchlists)==null?void 0:d.find(p=>(p==null?void 0:p.id)===(e==null?void 0:e.id)))==null?void 0:x.name)||"");L.push(`/watchlist/${u}${g?"?tag="+g:""}`)}},D=()=>{var t;((t=z.getBillingUserWatchlistUsage)==null?void 0:t.totalAvailable)?l.setIsOpenCreateWatchlist(!0,"create"):(S.setGatedModalState(!0),S.targetData=!0)},h=_(!1),o=J(()=>ge()),W=async e=>{var d;C("changeActiveWatchlist",!0);const t=l.getWatchlist;await l.createWatchedStock(t.id,e.id),y.$reset(),m.$reset(),await l.fetchWatchlist(t.id),await y.fetchStocksComponents("watchlist",n.getActiveTab.id,t.id),(d=A.value)!=null&&d.config&&A.value.track(`Add "${e==null?void 0:e.symbol}" to Watchlist "${t==null?void 0:t.name}"`)},j=e=>{var t,d;if(e){const x=(t=B.params)==null?void 0:t.slug,g=((d=e==null?void 0:e.find(u=>F(u==null?void 0:u.name)===x))==null?void 0:d.id)||"";c.value=e.map(u=>({...u,selected:u.id===g}))}};return ie(()=>{j(l.getWatchlists)}),V(()=>l.getWatchlists,e=>{j(e)},{deep:!0,immediate:!0}),V(()=>l.getWatchlist,e=>{e!=null&&e.id&&(i.value=e,y.fetchUpcomingEvents("watchlist",e.id))},{immediate:!0,deep:!0}),(e,t)=>{var E,G,H,O,R;const d=Y,x=P,g=Z,u=ee,p=we,X=pe;return r(),b("div",$e,[s("div",Ce,[e.showGoBackLink?(r(),k(d,{key:0,class:"text-[13px] text-primary font-medium leading-4",to:"/watchlist"},{default:de(()=>[ue(w("< Back to All Watchlists"))]),_:1})):$("",!0),(E=a(c))!=null&&E.length?(r(),b("button",{key:1,class:"flex items-center",onClick:t[0]||(t[0]=f=>h.value=!0)},[U(x,{name:"img/pages/watchlist/add-trigger",class:"text-primary w-[14px] h-[14px]"}),Ae])):(r(),k(g,{key:2,class:"mx-3",size:4})),a(h)?(r(),k(u,{key:3,"is-open":a(h),onOnFocusout:t[1]||(t[1]=f=>h.value=!1),onSelectValue:W,modelValue:a(v),"onUpdate:modelValue":t[2]||(t[2]=f=>me(v)?v.value=f:null),onResetInput:t[3]||(t[3]=f=>v.value=""),style:{"box-shadow":"0 0 0 1000vh #5B627060"}},null,8,["is-open","modelValue"])):$("",!0)]),s("div",Be,[s("div",null,[s("div",Te,[De,s("p",Me,"Updated: "+w(a(o)),1)]),Ve]),s("div",ze,[(G=a(c))!=null&&G.length?(r(),b(Q,{key:0},[s("button",{onClick:D,class:"flex items-center"},[U(x,{name:"img/pages/watchlist/plus",class:"w-[12px] h-[12px] text-primary"}),Le]),U(p,{class:"ml-7",items:a(c),onChangeActiveWatchlist:t[4]||(t[4]=f=>T(f))},null,8,["items"])],64)):(r(),k(g,{key:1,class:"mx-3",size:5}))])]),(O=(H=a(i))==null?void 0:H.stocks)!=null&&O.length?(r(),k(X,{key:0,mode:"noPeriod",stocksSymbolList:(R=a(i))==null?void 0:R.stocks.map(f=>f.id),"current-item":{id:a(i).id,type:"watchlist"},class:"mt-3"},null,8,["stocksSymbolList","current-item"])):$("",!0)])}}});export{Pe as _};