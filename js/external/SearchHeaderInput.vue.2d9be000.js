import{d as B,a as F,r as w,o as c,c as i,b as t,i as b,e as p,t as x,F as L,j,h as O,aO as ce,aC as ae,k as I,z as de,m as ie,aB as ue,f as he,g as pe,b1 as fe}from"./entry.8bd29e6a.js";import{_ as ge}from"./SwitchCheckBox.vue.26346bdb.js";import{_ as me}from"./FormCheckbox.vue.e7c6dfe6.js";import{_ as _e}from"./SmallLoader.a34eb8b6.js";import{_ as xe}from"./LineChart.vue.36290516.js";import{a as be}from"./useClickOutside.6904fd8d.js";import{u as ve,f as ye}from"./utils.11774da7.js";const Se=["src"],ke=["onClick"],we={class:"text-start whitespace-nowrap font-normal text-sm"},Ce=["src"],$e=B({__name:"Dropdown",props:{placeholder:{default:""},items:{default:()=>[]}},emits:["changeDropdownItem"],setup(a,{emit:l}){const r=a,y=F(()=>{var u;return(u=r.items.find(o=>o==null?void 0:o.selected))==null?void 0:u.title}),f=w(!1),v=u=>{l("changeDropdownItem",u),f.value=!1};return(u,o)=>(c(),i("div",{class:b(["bg-white rounded-[8px] py-2 px-1.5 relative",{"border border-primary border-border shadow-sm":p(f)}])},[t("div",{class:"flex items-center justify-center cursor-pointer w-[7rem]",onClick:o[0]||(o[0]=g=>f.value=!p(f))},[t("p",{class:b(["mr-3 text-sm font-medium text-grey whitespace-nowrap overflow-hidden text-ellipsis",{"text-primary":p(f)}])},x(y.value||u.placeholder),3),t("img",{src:"/img/search/arrow-purple.svg",class:b([{grayscale:!p(f)},"rotate-180"]),alt:"arrow down icon"},null,10,Se)]),t("div",{class:b(["max-h-[200px] cursor-pointer shadow-md absolute border border-border py-3 md:right-0 w-[19rem] top-full rounded-[6px] bg-white",{hidden:!p(f)}])},[(c(!0),i(L,null,j(u.items,(g,C)=>(c(),i("div",{key:C,class:"flex justify-between items-center w-full py-2 hover:bg-[rgba(247,240,255,0.85)] px-4",onClick:S=>v(g)},[t("p",we,x(g.title),1),g.selected?(c(),i("img",{key:0,src:"/img/search/checked.svg",alt:"arrow down icon"},null,8,Ce)):O("",!0)],8,ke))),128))],2)],2))}}),Fe=ce({id:"filter-store",state:()=>({isAllSelected:!1,isOpenFilters:!1,onlyMathSymbol:!1,checkIfSomeSelected:!1,selectedIDs:[]}),getters:{getOpenFilters:a=>a.isOpenFilters,getAllSelected:a=>a.isAllSelected,getOnlyMathSymbol:a=>a.onlyMathSymbol,getCheckIfSomeSelected:a=>a.checkIfSomeSelected,getSelectedIDs:a=>a.selectedIDs},actions:{setOpenFilters(a){this.isOpenFilters=a},setAllSelected(a){this.isAllSelected=a},setOnlyMathSymbol(a){this.onlyMathSymbol=a},setSelectedIDs(a){this.selectedIDs=a.filter(l=>l.selected).map(l=>l.id),this.checkIfSomeSelected=this.selectedIDs.length>0}}}),Ie={class:"relative"},Oe=["src"],De={class:"flex items-center justify-between py-[19px] px-4 border-b-[1px] border-mischka"},Ae=["src"],Be=t("span",{class:"ml-2 font-medium text-sm text-footer-nav"},"Filters",-1),Le={class:"py-[19px] px-4 bg-white rounded-b-lg"},je={class:"flex items-center"},Ee=["src"],Te={class:"mr-5 flex items-center pl-2"},Me=t("span",{class:"mr-3.5 text-grey text-sm leading-5 font-light"},"Only match symbols",-1),Ve={class:"pt-8 h-full"},Ne=t("p",{class:"text-[11px] leading-3 font-light text-grey"},"MORE FILTERS",-1),Re={class:"pt-5"},qe={class:"flex items-center pb-2"},Ue=t("button",{class:"text-xs leading-3 text-grey underline mt-9"},"More Options(TBD)",-1),ze=B({__name:"FilterOptions",setup(a){const l=Fe(),r=F(()=>l.getAllSelected),y=F(()=>l.getOpenFilters),f=F(()=>l.getOnlyMathSymbol),v=F(()=>l.getCheckIfSomeSelected),u=F(()=>l.getSelectedIDs),o=w([{title:"Dow 30",selected:!1,id:0},{title:"NASDAQ 100",selected:!1,id:1},{title:"S&P 500",selected:!1,id:2},{title:"Russell 200",selected:!1,id:3}]),g=()=>{l.setAllSelected(!r.value),o.value=o.value.map(m=>({...m,selected:r.value})),l.setSelectedIDs(o.value)},C=m=>{m.selected=!m.selected,l.setSelectedIDs(o.value)},S=()=>{o.value=o.value.map(m=>({...m,selected:!1})),l.setSelectedIDs(o.value),l.setAllSelected(!1)};return ae(()=>u.value,m=>{m.forEach(h=>{o.value[h].selected=!0})},{immediate:!0}),(m,h)=>{const _=ge,D=me;return c(),i("div",null,[t("div",Ie,[t("button",{onClick:h[0]||(h[0]=k=>p(l).setOpenFilters(!0)),class:b(["before:absolute before:top-[-2px] before:right-[-2px] before:content-[''] before:w-[9px] before:h-[9px] before:border-[1px] before:border-white before:rounded-full before:bg-primary",{"before:hidden":!v.value}])},[t("img",{class:"min-w-[16px] block",src:"/img/search/search-filter.svg",alt:"filter"},null,8,Oe)],2)]),t("div",{class:b(["absolute min-h-[15rem] transition-all duration-400 ease-in-out rounded-lg top-0 scale-0 w-full h-full bg-white left-0 text-start",{"scale-100":y.value}])},[t("div",De,[t("button",{onClick:h[1]||(h[1]=k=>p(l).setOpenFilters(!1)),class:"flex items-center"},[t("img",{class:"object-contain",src:"/img/search/go-back.svg",alt:"filter"},null,8,Ae),Be]),t("button",{onClick:S,class:"text-primary font-normal text-xs leading-3 underline"}," Clear All ")]),t("div",Le,[t("div",je,[t("img",{class:"object-contain",src:"/img/search/abc.svg",alt:"filter"},null,8,Ee),t("div",Te,[Me,I(_,{active:f.value,onChangeActive:h[2]||(h[2]=k=>p(l).setOnlyMathSymbol(!f.value))},null,8,["active"])])]),t("div",Ve,[Ne,t("div",Re,[t("div",qe,[I(D,{active:r.value,onChangeCheck:g},null,8,["active"]),t("span",{class:b(["text-sm text-grey pl-1",{"text-footer-nav font-bold":r.value}])},"(Select All)",2)]),(c(!0),i(L,null,j(o.value,(k,E)=>(c(),i("div",{key:E,class:"flex items-center pb-2"},[I(D,{active:k.selected,onChangeCheck:T=>C(k)},null,8,["active","onChangeCheck"]),t("span",{class:b(["text-sm text-grey pl-1",{"text-footer-nav font-bold":k.selected}])},x(k.title),3)]))),128))]),Ue])])],2)])}}}),He={class:"search__filter-search lg:flex items-center justify-between border-b-[1px] border-mischka p-[18px] text-center"},Je={class:"lg:w-[70%] flex items-center"},Qe=["src"],Ye={class:"flex items-center lg:w-auto w-full justify-between border-l-[1px] border-mischka pl-2"},Ge=["onClick"],Ke={class:"lg:w-[30%] flex items-center justify-between lg:ml-10 mt-4 lg:mt-0"},We={class:"flex items-center md:border-r-[1px] md:border-mischka pr-2"},Xe=t("span",{class:"font-normal text-grey text-xs leading-3 pr-1"},"Sort:",-1),Ze=B({__name:"FilterBar",emits:["filter-button"],setup(a,{emit:l}){const r=w([{id:"all",title:"All",active:!0},{id:"Company",title:"Stocks"},{id:"Index",title:"Indexes"},{id:"ETF",title:"ETFs"}]),y=w([{title:"Best Matches",selected:!1,id:0},{title:"% Change : Highest First",selected:!1,id:1},{title:"% Change : Lowest First",selected:!1,id:2},{title:"Fair Value Distance : Lowest First",selected:!1,id:3}]),f=u=>{r.value=r.value.map(o=>({...o,active:o.id===u})),l("filter-button",u)},v=u=>{y.value=y.value.map(o=>({...o,selected:o.id===u.id}))};return(u,o)=>{const g=$e,C=ze;return c(),i("div",He,[t("div",Je,[t("img",{src:"/img/search/time.svg",alt:"search",class:"mr-2"},null,8,Qe),t("div",Ye,[(c(!0),i(L,null,j(r.value,S=>(c(),i("button",{key:S.id,onClick:m=>f(S.id),class:b(["px-[18px] py-2 rounded-[6px] text-xs leading-3 mr-2 border transition-all duration-500",S.active?"text-primary border-primary bg-[rgba(247,240,255,0.85)]":"text-grey border-mischka"])},x(S.title),11,Ge))),128))])]),t("div",Ke,[t("div",We,[Xe,I(g,{placeholder:"Best Matches",items:y.value,onChangeDropdownItem:v},null,8,["items"])]),I(C,{class:"ml-2"})])])}}}),Pe={class:"flex px-4 md:px-0 items-center w-full"},et={class:"shadow-lg bg-white py-3 px-5 rounded-xl flex justify-between items-center w-full"},tt=["value"],st={class:"flex items-center"},lt=["src"],ot={class:"md:border-l-[1px] md:border-mischka ml-2"},at=["src"],nt=t("span",{class:"text-xs font-normal text-white pl-1"},"Search",-1),rt=["src"],ct={class:"absolute md:max-w-11/12 w-full bg-white md:shadow-lg rounded-xl top-full md:mt-2 mt-10 left-0 z-50"},dt={key:0,class:"search__recent-search flex items-center border-b-[1px] border-mischka p-[18px]"},it=["src"],ut=t("span",{class:"font-medium text-xs text-grey pl-[10px]"},"Recent Searches",-1),ht={class:"search__result max-h-[55vh] md:max-h-[18rem] overflow-auto"},pt={key:0,class:"flex justify-center"},ft=["onClick"],gt={class:"flex items-center w-8/12"},mt=["src","alt"],_t={class:"pl-2"},xt={class:"block font-semibold text-sm text-footer-nav"},bt={class:"font-normal"},vt={class:"block text-xs text-time-grey leading-3 font-normal"},yt={class:"flex items-end justify-end mt-2 md:mt-0 w-4/12"},St={class:"mx-8 w-[25px] h-[24px]"},kt={class:"flex"},wt={class:"font-semibold text-[10px] text-black"},Ct={class:"text-sm font-normal text-black"},$t={class:"flex justify-end"},Ft={key:2,class:"flex flex-col justify-center items-center py-10"},It=["src"],Ot=t("p",{class:"font-normal text-sm text-grey"},"No symbols match your search",-1),Mt=B({__name:"SearchHeaderInput",props:{isOpen:{type:Boolean,default:!1},modelValue:{default:""},isLink:{type:Boolean,default:!1},searchQuery:{}},emits:["on-focusout","update:modelValue","reset-input","select-value"],setup(a,{emit:l}){const r=a,y=w(""),f=de(),v={BUY:{buttonClass:"text-japanese-laurel bg-[#E5F6E8]",status:"BUY",chart:"positive",textColor:"text-green",arrow:"â†‘",lineColor:"#088a20"},HOLD:{buttonClass:"text-grey bg-[#EBECEE]",status:"HOLD",chart:"",textColor:"",arrow:"",lineColor:"#788091"},SELL:{buttonClass:"text-monza bg-[#FCE2E2]",status:"SELL",chart:"negative",textColor:"text-red",arrow:"â†“",lineColor:"#d10015"}},{clickOutSide:u,isClickedOutside:o}=be(),g=ve(),C=ie(),S=F(()=>C.getTheme),m=w([]);let h=w(!0),_=w([]),D;const k=async s=>{clearTimeout(D),h.value=!0,D=setTimeout(async()=>{var n;if(s.target.value){const{data:d}=await g.fetchSearchStocks((n=s.target.value)==null?void 0:n.trim());d?_.value=d.stocks.nodes:_.value=[]}else _.value=m.value;h.value=!1},500),l("update:modelValue",s.target.value)},E=s=>{if(r.isLink){const d=(s==null?void 0:s.securityType)==="ETF"?"/company-etf/":"/company/";f.push(d+(s==null?void 0:s.symbol.toLowerCase()))}l("on-focusout"),l("update:modelValue",""),l("select-value",s);const n=localStorage.recentSearches?JSON.parse(localStorage.recentSearches):[];n.includes(s.symbol)?n.sort((d,A)=>d==s.symbol?-1:A==s.symbol?1:0):n.unshift(s.symbol),n.length>10&&n.pop(),localStorage.recentSearches=JSON.stringify(n)},T=s=>{var d;const{data:n}=g.getSearchStocks;if(n)switch(s){case"all":_.value=n.stocks.nodes;break;default:_.value=((d=n.stocks.nodes)==null?void 0:d.filter(A=>A.securityType===s))||[]}};return ue(async()=>{var n;(n=y.value)==null||n.focus(),u("search-box");const s=localStorage.recentSearches?JSON.parse(localStorage.recentSearches):[];if(r!=null&&r.modelValue){const d=await g.fetchSearchStocks(r.modelValue);d.data&&(_.value=d.data.stocks.nodes,h.value=!1)}if(s.length){const d=await g.fetchMultipleStock(s,r.searchQuery);d.data.stocks.nodes&&(m.value=d.data.stocks.nodes),_.value.length===0&&(_.value=d.data.stocks.nodes,h.value=!1)}!(r!=null&&r.modelValue)&&!s.length&&(h.value=!1)}),ae(()=>o.value,()=>{!o.value&&l("on-focusout")}),(s,n)=>{const d=Ze,A=_e,ne=xe;return c(),i("div",fe(s.$attrs,{class:"w-full md:w-8/12 z-[200] left-1/2 translate-x-[-50%] fixed md:absolute top-[1rem]",id:"search-box"}),[t("div",Pe,[t("div",et,[t("input",{ref_key:"searchInput",ref:y,class:"text-time-grey bg-transparent font-normal text-sm w-2/3 md:w-10/12",placeholder:"Symbol or Name of Stock",type:"text",value:s.modelValue,autocomplete:"off",autocapitalize:"off",autofocus:"",spellcheck:"false",onInput:k,name:"search"},null,40,tt),t("div",st,[t("img",{onClick:n[0]||(n[0]=e=>s.$emit("reset-input")),class:"hidden md:block cursor-pointer",src:"/img/search/cross.svg",alt:"cross"},null,8,lt),t("div",ot,[t("button",{class:b([s.modelValue.length?"bg-primary":"bg-[#C9CCD3]","py-2 px-2 ml-1 rounded-2xl flex items-center"])},[t("img",{src:"/img/search/search-white.svg",alt:"search"},null,8,at),nt],2)])])]),t("button",{onClick:n[1]||(n[1]=e=>s.$emit("on-focusout")),class:"block md:hidden mx-4"},[t("img",{class:"h-4",src:"/img/icons/cross.svg",alt:"close"},null,8,rt)])]),t("div",ct,[s.modelValue?(c(),he(d,{key:1,onFilterButton:T})):(c(),i("div",dt,[t("img",{src:"/img/icons/recent.svg",alt:"recent"},null,8,it),ut])),t("div",ht,[p(h)?(c(),i("div",pt,[I(A)])):O("",!0),p(_).length&&!p(h)?(c(!0),i(L,{key:1},j(p(_),(e,re)=>{var M,V,N,R,q,U,z,H,J,Q,Y,G,K,W,X,Z,P,ee,te,se;return c(),i("button",{key:re,class:"w-full hover:bg-icon-bg cursor-pointer last-of-type:border-0 border-b-[1px] border-mischka p-[18px] flex items-center justify-between text-left",onClick:$=>E(e)},[t("span",gt,[e!=null&&e[p(S)+"Logo"]?(c(),i("img",{key:0,width:"32",height:"32",class:"rounded-lg object-contain",src:e==null?void 0:e[p(S)+"Logo"],alt:e==null?void 0:e.name},null,8,mt)):O("",!0),t("span",_t,[t("span",xt,[pe(x(e==null?void 0:e.symbol)+" ",1),t("span",bt,x(e==null?void 0:e.name),1)]),t("span",vt," Stock: "+x((M=e==null?void 0:e.exchange)==null?void 0:M.name)+" - "+x((V=e==null?void 0:e.quote)==null?void 0:V.price.currency),1)])]),t("span",yt,[t("span",{class:b(["md:w-auto whitespace-nowrap md:whitespace-normal md:w-3/12 py-1 px-3 text-center rounded-md md:rounded-3xl text-[11px] leading-3 font-semibold",(R=v[(N=e==null?void 0:e.analystRatingSummary)==null?void 0:N.rating])==null?void 0:R.buttonClass])},x((q=e==null?void 0:e.analystRatingSummary)==null?void 0:q.rating),3),t("span",St,[I(ne,{bottom:"0%","line-data":[{data:(U=e==null?void 0:e.intradayPrices)==null?void 0:U.nodes.map($=>{var le,oe;return(le=$==null?void 0:$.average)!=null&&le.amount?(oe=$==null?void 0:$.average)==null?void 0:oe.amount:0}),lineColor:(H=v[(z=e==null?void 0:e.analystRatingSummary)==null?void 0:z.rating])==null?void 0:H.lineColor}],"show-y-axis":!1,"split-line":!1,"has-tooltip":!1,class:"pointer-events-none"},null,8,["line-data"])]),t("span",null,[t("span",kt,[t("span",wt,x((J=e==null?void 0:e.quote)!=null&&J.price?p(ye)((Q=e==null?void 0:e.quote)==null?void 0:Q.price.amount,(Y=e==null?void 0:e.quote)==null?void 0:Y.price.currency).slice(0,1):""),1),t("span",Ct,x((G=e==null?void 0:e.quote)==null?void 0:G.price.amount),1)]),t("span",$t,[t("span",{class:b(["text-[11px] font-semibold",(W=v[(K=e==null?void 0:e.analystRatingSummary)==null?void 0:K.rating])==null?void 0:W.textColor])},x((Z=v[(X=e==null?void 0:e.quote)==null?void 0:X.trendDirection])==null?void 0:Z.arrow),3),(P=e==null?void 0:e.quote)!=null&&P.changePercent.mathAmount?(c(),i("span",{key:0,class:b(["text-[11px] font-normal",(te=v[(ee=e==null?void 0:e.analystRatingSummary)==null?void 0:ee.rating])==null?void 0:te.textColor])},x((((se=e==null?void 0:e.quote)==null?void 0:se.changePercent.mathAmount)*100).toFixed(2))+"% ",3)):O("",!0)])])])],8,ft)}),128)):O("",!0),!p(_).length&&!p(h)?(c(),i("div",Ft,[t("img",{src:"/img/search/empty-data.svg",alt:"empty"},null,8,It),Ot])):O("",!0)])])],16)}}});export{Mt as _};