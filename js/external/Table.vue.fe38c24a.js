import{d as ws,y as Ss,m as xs,a as ft,r as fe,aC as _t,aB as Ls,o as E,c as F,e as at,k as Rt,h as ue,b as P,i as lt,t as Ke,a$ as Ns,b0 as Ms,F as st,j as kt,f as it,w as Tt,g as Fs,v as Os,aS as Vs,bR as H,bF as Ys,ax as _e,b3 as z}from"./entry.8bd29e6a.js";import{_ as $s}from"./SmallLoader.a34eb8b6.js";import{_ as Is}from"./DropdownSelect.vue.398b244e.js";import{_ as Us}from"./nuxt-link.a6eea277.js";import{_ as Hs}from"./ThreeCircleDropBtn.vue.c33fc0c3.js";import{j as zs,n as Gs,u as js,N as Ts,l as n,O as j,d as Te,P as Ws,f as De,s as Qs,i as Xs,H as As}from"./utils.11774da7.js";const Js=()=>{const ct=(u,be)=>{let he=0,Ae=0;const o=G=>{he=G.clientX;const qe=window.getComputedStyle(u);Ae=parseInt(qe.width,10),document.addEventListener("mousemove",rt),document.addEventListener("mouseup",Pe)},rt=G=>{const qe=G.clientX-he;u.style.width=`${Ae+qe}px`},Pe=()=>{document.removeEventListener("mousemove",rt),document.removeEventListener("mouseup",Pe)};be.addEventListener("mousedown",o)};return{startResizeCell:u=>{const be=document.getElementById(u),he=be==null?void 0:be.querySelectorAll("th");he!=null&&he.length&&[].forEach.call(he,Ae=>{const o=document.createElement("div");o.classList.add("resizer"),o.style.height=`${be.offsetHeight}px`,Ae.appendChild(o),ct(Ae,o)})}}},Zs={key:0,class:"flex justify-center"},ds={class:"min-w-[10rem] w-[15rem] h-full py-3 pl-3"},ei={class:"flex items-center"},ti={class:"whitespace-nowrap text-xs text-secondary-text font-normal leading-3 border-r-[1px] border-mischka pr-2"},ai={class:"sm:flex hidden items-center ml-2 pl-2 bg-white px-2 py-1 rounded-md border-[1px] border-secondary-text"},si=["src"],ii={class:"flex items-center justify-center w-full px-2 py-2"},ri=["src"],ui={class:"text-secondary-text uppercase text-xs leading-3 font-semibold px-2 block"},li=["onClick"],ci=["src"],ni=["src"],oi=P("span",{class:"pr-1 text-sm"},null,-1),vi={class:"relative"},yi=["src"],pi={class:"min-w-[10rem] w-[15rem]"},mi=["src","alt"],gi={class:"block pl-1"},bi={class:"block text-sm font-semibold text-footer-nav leading-3 mb-1"},hi={class:"pl-2 text-xs leading-3 font-normal sm:inline hidden"},fi={class:"block text-xs leading-3 text-time-grey"},_i={class:"max-w-[2rem] w-[1rem]"},Ri={class:"flex justify-end"},ki={key:1,class:"flex justify-center"},Ti={class:"flex justify-center mt-4"},Ci=ws({__name:"Table",props:{stocksList:{default:()=>[]},pageInfo:{default:()=>({endCursor:"",hasNextPage:!1})},parent:{},type:{},period:{default:"ANNUAL"},tab:{},tableHeaders:{},tableItemsDynamicallyLoading:{type:Boolean,default:!1},aggInfo:{},takeFilterArgsFromStr:{type:Boolean,default:!1},isLoadingViaProp:{type:Boolean,default:!1},stockIdentifierType:{default:"SYMBOL"}},emits:["industry-show-more","screener-show-more"],setup(ct,{emit:nt}){const u=ct,be=Ss(),he=zs(),{startResizeCell:Ae}=Js(),o=Gs(),rt=xs(),Pe=ft(()=>rt.getTheme),G=js(),qe={value:H(()=>z(()=>import("./TableItemValue.39656de2.js"),["./TableItemValue.39656de2.js","./entry.8bd29e6a.js","./entry.4e22f1d3.css"],import.meta.url)),"line-chart":H(()=>z(()=>import("./TableItemLineChart.4667734a.js"),["./TableItemLineChart.4667734a.js","./TableItemLineChart.vue.df06772e.js","./index.esm.min.ffebd841.js","./entry.8bd29e6a.js","./entry.4e22f1d3.css","./index.eed71953.js"],import.meta.url)),"line-chart-variable-period":H(()=>z(()=>import("./TableItemLineChartVariablePeriod.adc50b62.js"),["./TableItemLineChartVariablePeriod.adc50b62.js","./index.esm.min.ffebd841.js","./entry.8bd29e6a.js","./entry.4e22f1d3.css","./index.eed71953.js"],import.meta.url)),distance:H(()=>z(()=>import("./TableItemDistance.afd4c3d8.js"),["./TableItemDistance.afd4c3d8.js","./entry.8bd29e6a.js","./entry.4e22f1d3.css"],import.meta.url)),"fair-value-distance":H(()=>z(()=>import("./TableItemFairValueDistance.a868458f.js"),["./TableItemFairValueDistance.a868458f.js","./entry.8bd29e6a.js","./entry.4e22f1d3.css"],import.meta.url)),"simple-value":H(()=>z(()=>import("./TableItemSimpleValue.2ecaa3e3.js"),["./TableItemSimpleValue.2ecaa3e3.js","./entry.8bd29e6a.js","./entry.4e22f1d3.css"],import.meta.url)),"polar-chart":H(()=>z(()=>import("./TableItemPolarChart.11d96650.js"),["./TableItemPolarChart.11d96650.js","./index.esm.min.ffebd841.js","./entry.8bd29e6a.js","./entry.4e22f1d3.css","./_plugin-vue_export-helper.c27b6911.js","./TableItemPolarChart.d2244e9a.css"],import.meta.url)),analyst:H(()=>z(()=>import("./TableItemAnalyst.d7f1e81b.js"),["./TableItemAnalyst.d7f1e81b.js","./entry.8bd29e6a.js","./entry.4e22f1d3.css"],import.meta.url)),tag:H(()=>z(()=>import("./TableItemTag.fcb0c093.js"),["./TableItemTag.fcb0c093.js","./entry.8bd29e6a.js","./entry.4e22f1d3.css"],import.meta.url)),"arrow-value":H(()=>z(()=>import("./TableItemArrowValue.38a766d3.js"),["./TableItemArrowValue.38a766d3.js","./entry.8bd29e6a.js","./entry.4e22f1d3.css"],import.meta.url)),"pie-chart":H(()=>z(()=>import("./TableItemPieChart.1fa7bbcd.js"),["./TableItemPieChart.1fa7bbcd.js","./index.esm.min.ffebd841.js","./entry.8bd29e6a.js","./entry.4e22f1d3.css"],import.meta.url)),"bar-chart":H(()=>z(()=>import("./TableItemBarChart.a164aa40.js"),["./TableItemBarChart.a164aa40.js","./index.esm.min.ffebd841.js","./entry.8bd29e6a.js","./entry.4e22f1d3.css"],import.meta.url)),date:H(()=>z(()=>import("./TableItemDate.55afce84.js"),["./TableItemDate.55afce84.js","./entry.8bd29e6a.js","./entry.4e22f1d3.css"],import.meta.url))},Ks=ft(()=>o.getIsOpenPivotFilter),ot=ft(()=>{var s;return(u==null?void 0:u.tableHeaders)||Ts.value[((s=u==null?void 0:u.tab)==null?void 0:s.toUpperCase())||o.getActiveTab.id.toUpperCase()]}),i=fe([]),vt=fe({endCursor:"",hasNextPage:!1}),Ee=fe(!0),yt=fe(!1);let ut=0;const Ds=()=>{o.setOpenPivotFilter(!Ks.value)},Ps=()=>{switch(yt.value=!0,u==null?void 0:u.type){case"industry":nt("industry-show-more");break;case"screener":nt("screener-show-more");break;default:G.fetchStocksComponents(u.type,o.getActiveTab.id,u.parent,u.period,u.pageInfo.endCursor||"","",u.stockIdentifierType)}ut=ut+1},V=s=>{var e,a,t;return{id:s==null?void 0:s.id,name:s==null?void 0:s.name,symbol:s==null?void 0:s.symbol,lightLogo:s==null?void 0:s.lightLogo,darkLogo:s==null?void 0:s.darkLogo,exchange:(e=s==null?void 0:s.exchange)==null?void 0:e.name,currency:(a=s==null?void 0:s.quote)==null?void 0:a.price.currency,securityType:s==null?void 0:s.securityType,percent:(t=s==null?void 0:s.percent)==null?void 0:t.displayAmount}},qs=(s=[])=>{if(s!=null&&s.length)switch(yt.value=!1,(u==null?void 0:u.tab)||(u.type!=="portfolio"&&o.getActiveTab.id==="portfolio"?"basic":o.getActiveTab.id)){case"portfolio":return s==null?void 0:s.map(e=>{var a,t,r,y,c,b,R,g,k,T,A,l,_,K,h,f,D,p,C,w,S,x,L,N,B,Y,$,I,U,ce,ne,oe,ve,ye,pe,me,ge,O,W,Q,v,X,J,Z,d,ee,te,ae,se,ie,re;return(t=(a=e==null?void 0:e.security)==null?void 0:a.statistics)==null||t.pte,(c=(y=(r=e==null?void 0:e.security)==null?void 0:r.statistics)==null?void 0:y.salesGrowth)==null||c.displayAmount,((g=(R=(b=e==null?void 0:e.security)==null?void 0:b.statistics)==null?void 0:R.salesGrowth)==null?void 0:g.mathAmount)*100,{...V(e),data:[{componentKey:"simple-value",value:De((e==null?void 0:e.shares)*((T=(k=e==null?void 0:e.quote)==null?void 0:k.change)==null?void 0:T.amount),(l=(A=e==null?void 0:e.quote)==null?void 0:A.change)==null?void 0:l.currency)||"-",color:{green:(e==null?void 0:e.shares)*((K=(_=e==null?void 0:e.quote)==null?void 0:_.change)==null?void 0:K.amount)>0,red:(e==null?void 0:e.shares)*((f=(h=e==null?void 0:e.quote)==null?void 0:h.change)==null?void 0:f.amount)<0}},{componentKey:"line-chart-variable-period",percent:((C=(p=(D=le==null?void 0:le.value)==null?void 0:D.find(M=>M.symbol===e.symbol))==null?void 0:p[`q${Re.value}`])==null?void 0:C.percent)||((S=(w=e==null?void 0:e.change)==null?void 0:w[Re.value])==null?void 0:S.percent),isPositive:((N=(L=(x=le==null?void 0:le.value)==null?void 0:x.find(M=>M.symbol===e.symbol))==null?void 0:L[`q${Re.value}`])==null?void 0:N.trend)||((Y=(B=e==null?void 0:e.change)==null?void 0:B[Re.value])==null?void 0:Y.trend),lineData:((ne=(ce=(U=(I=($=le==null?void 0:le.value)==null?void 0:$.find(M=>M.symbol===e.symbol))==null?void 0:I[`q${Re.value}`])==null?void 0:U.nodes)==null?void 0:ce.map(M=>M.close.amount))==null?void 0:ne.reverse())||((ve=(oe=e==null?void 0:e.change)==null?void 0:oe[Re.value])==null?void 0:ve.lineChartData)},{componentKey:"value",value:(e==null?void 0:e.shares)||"-"},{componentKey:"value",value:De((e==null?void 0:e.shares)*((pe=(ye=e==null?void 0:e.quote)==null?void 0:ye.price)==null?void 0:pe.amount),(ge=(me=e==null?void 0:e.quote)==null?void 0:me.price)==null?void 0:ge.currency)||"-"},{key:"percentOfPortfolio",componentKey:"fair-value-distance",mode:(e==null?void 0:e.pricePerShare)*(e==null?void 0:e.shares)-((W=(O=e==null?void 0:e.quote)==null?void 0:O.price)==null?void 0:W.amount)*(e==null?void 0:e.shares)>0?"positive":"negative",value:"â€¢ "+Math.abs((e==null?void 0:e.shares)*((v=(Q=e==null?void 0:e.quote)==null?void 0:Q.price)==null?void 0:v.amount)/(e==null?void 0:e.balance)*100).toFixed(2)+"%",valueNum:(e==null?void 0:e.shares)*((J=(X=e==null?void 0:e.quote)==null?void 0:X.price)==null?void 0:J.amount)/(e==null?void 0:e.balance)*100,afterText:"OF PORTFOLIO"},{componentKey:"simple-value",value:De((e==null?void 0:e.pricePerShare)*(e==null?void 0:e.shares)-((d=(Z=e==null?void 0:e.quote)==null?void 0:Z.price)==null?void 0:d.amount)*(e==null?void 0:e.shares),(te=(ee=e==null?void 0:e.quote)==null?void 0:ee.price)==null?void 0:te.currency)||"-",color:{green:(e==null?void 0:e.pricePerShare)*(e==null?void 0:e.shares)-((se=(ae=e==null?void 0:e.quote)==null?void 0:ae.price)==null?void 0:se.amount)*(e==null?void 0:e.shares)>0,red:(e==null?void 0:e.pricePerShare)*(e==null?void 0:e.shares)-((re=(ie=e==null?void 0:e.quote)==null?void 0:ie.price)==null?void 0:re.amount)*(e==null?void 0:e.shares)<0}}]}});case"basic":return s==null?void 0:s.map(e=>{var y,c,b,R,g,k,T,A,l,_,K,h,f,D,p,C,w,S,x,L,N,B,Y,$,I,U,ce,ne,oe,ve,ye,pe,me,ge,O,W,Q,v,X,J,Z,d,ee,te,ae,se,ie,re,M;const a=(c=(y=e==null?void 0:e.security)==null?void 0:y.statistics)==null?void 0:c.pte,t=(g=(R=(b=e==null?void 0:e.security)==null?void 0:b.statistics)==null?void 0:R.salesGrowth)==null?void 0:g.displayAmount,r=((A=(T=(k=e==null?void 0:e.security)==null?void 0:k.statistics)==null?void 0:T.salesGrowth)==null?void 0:A.mathAmount)*100||0;return{...V(e),data:[{componentKey:"polar-chart",data:{alignment:{SENTIMENT:(h=(K=(_=(l=e==null?void 0:e.security)==null?void 0:l.dimensions)==null?void 0:_.find(q=>q.type==="SENTIMENT"))==null?void 0:K.scorePercent)==null?void 0:h.mathAmount,MARKET_DYNAMICS:(C=(p=(D=(f=e==null?void 0:e.security)==null?void 0:f.dimensions)==null?void 0:D.find(q=>q.type==="MARKET_DYNAMICS"))==null?void 0:p.scorePercent)==null?void 0:C.mathAmount,CASH_MANAGEMENT:(L=(x=(S=(w=e==null?void 0:e.security)==null?void 0:w.dimensions)==null?void 0:S.find(q=>q.type==="CASH_MANAGEMENT"))==null?void 0:x.scorePercent)==null?void 0:L.mathAmount,DIVIDENDS:($=(Y=(B=(N=e==null?void 0:e.security)==null?void 0:N.dimensions)==null?void 0:B.find(q=>q.type==="DIVIDENDS"))==null?void 0:Y.scorePercent)==null?void 0:$.mathAmount,STRUCTURE:(ne=(ce=(U=(I=e==null?void 0:e.security)==null?void 0:I.dimensions)==null?void 0:U.find(q=>q.type==="STRUCTURE"))==null?void 0:ce.scorePercent)==null?void 0:ne.mathAmount,VALUATION:(pe=(ye=(ve=(oe=e==null?void 0:e.security)==null?void 0:oe.dimensions)==null?void 0:ve.find(q=>q.type==="VALUATION"))==null?void 0:ye.scorePercent)==null?void 0:pe.mathAmount,OPERATIONS:(W=(O=(ge=(me=e==null?void 0:e.security)==null?void 0:me.dimensions)==null?void 0:ge.find(q=>q.type==="OPERATIONS"))==null?void 0:O.scorePercent)==null?void 0:W.mathAmount},percent:((X=(v=(Q=e==null?void 0:e.security)==null?void 0:Q.dimensionSummary)==null?void 0:v.scorePercent)==null?void 0:X.mathAmount)||0}},{componentKey:"value",value:((Z=(J=e==null?void 0:e.quote)==null?void 0:J.close)==null?void 0:Z.displayAmount)||"-"},{componentKey:"line-chart",percent:(te=(ee=(d=e==null?void 0:e.quote)==null?void 0:d.changePercent)==null?void 0:ee.displayAmount)==null?void 0:te.replace("-",""),isPositive:((se=(ae=e==null?void 0:e.quote)==null?void 0:ae.changePercent)==null?void 0:se.trendDirection)!=="NEGATIVE",lineData:(ie=e==null?void 0:e.closingPricePreviews)==null?void 0:ie.map(q=>{var ke;return(ke=q==null?void 0:q.close)==null?void 0:ke.amount})},{componentKey:"value",value:(re=e==null?void 0:e.percent)==null?void 0:re.displayAmount},{componentKey:"distance",value:t||"-",color:{red:r&&r<-10,green:r&&r>20}},{componentKey:"simple-value",value:a||"-",color:{green:a>0&&a<15,red:a<0||a>60}},{componentKey:"simple-value",value:((M=e==null?void 0:e.sector)==null?void 0:M.name)||"-"}]}});case"rating_and_fair_values":return s==null?void 0:s.map(e=>{var b,R,g,k,T,A,l,_,K,h,f,D,p,C,w,S,x,L,N,B,Y,$,I,U;const a=(R=(b=e==null?void 0:e.equitysetRating)==null?void 0:b.fairValue)==null?void 0:R.amount,t=(k=(g=e==null?void 0:e.analystRatingSummary)==null?void 0:g.fairValue)==null?void 0:k.amount,r=(A=(T=e==null?void 0:e.quote)==null?void 0:T.price)==null?void 0:A.amount,y=As(a,r),c=As(t,r);return{...V(e),data:[{componentKey:"simple-value",value:((_=(l=e==null?void 0:e.quote)==null?void 0:l.close)==null?void 0:_.displayAmount)||"-",valueNum:r||"-"},{componentKey:"fair-value-distance",mode:y>0?"positive":"negative",value:(y>0?"â€¢ below ":"â€¢ above ")+Math.abs(y).toFixed(2)+"%",valueNum:y},{componentKey:"fair-value-distance",mode:c>0?"positive":"negative",value:(c>0?"â€¢ below ":"â€¢ above ")+Math.abs(c).toFixed(2)+"%",valueNum:c},{componentKey:"analyst",positive:!1,status:(K=e==null?void 0:e.analystRatingSummary)!=null&&K.rating?(h=e==null?void 0:e.analystRatingSummary)==null?void 0:h.rating:"-",percent:(D=(f=e==null?void 0:e.analystRatingSummary)==null?void 0:f.ratingPercent)!=null&&D.displayAmount?((C=(p=e==null?void 0:e.analystRatingSummary)==null?void 0:p.ratingPercent)==null?void 0:C.displayAmount)+"%":"-",valueNum:(S=(w=e==null?void 0:e.analystRatingSummary)==null?void 0:w.ratingPercent)!=null&&S.displayAmount?parseFloat((L=(x=e==null?void 0:e.analystRatingSummary)==null?void 0:x.ratingPercent)==null?void 0:L.displayAmount):"-"},{componentKey:"simple-value",value:(N=e==null?void 0:e.analystRatingSummary)!=null&&N.buysCount?(B=e==null?void 0:e.analystRatingSummary)==null?void 0:B.buysCount:"-"},{componentKey:"simple-value",value:(Y=e==null?void 0:e.analystRatingSummary)!=null&&Y.buysCount?($=e==null?void 0:e.analystRatingSummary)==null?void 0:$.holdsCount:"-"},{componentKey:"simple-value",value:(I=e==null?void 0:e.analystRatingSummary)!=null&&I.buysCount?(U=e==null?void 0:e.analystRatingSummary)==null?void 0:U.sellsCount:"-"}]}});case"industry_insight":return s==null?void 0:s.map(e=>{var X,J,Z,d,ee,te,ae,se,ie,re,M,q,ke,Ce,Be,we,Se,xe,Le,Ne,Me,Fe,Oe,Ve,Ye,$e,Ie,Ue,He,ze,Ge,je,We,Qe,Xe,Je,Ze,de,et,tt,Kt,Dt,Pt,qt,Et,Ct,Bt,wt,St,xt,Lt,Nt,Mt,Ft,Ot,Vt,Yt,$t,It,Ut,Ht,zt,Gt,jt,Wt,Qt,Xt,Jt,Zt,dt,ea,ta,aa,sa,ia,ra,ua,la,ca,na,oa,va,ya,pa,ma,ga,ba,ha,fa,_a,Ra,ka,Ta,Aa,Ka,Da,Pa,qa,Ea,Ca,Ba,wa,Sa,xa,La,Na,Ma,Fa,Oa,Va,Ya,$a,Ia,Ua,Ha,za,Ga,ja,Wa,Qa,Xa,Ja,Za,da,es,ts,as,ss,is,rs,us,ls,cs,ns,os,vs,ys,ps,ms,gs,bs,hs,fs,_s,Rs,ks;const a=(J=(X=e==null?void 0:e.security)==null?void 0:X.quarterIncome)==null?void 0:J.nodes,t=(a==null?void 0:a.length)&&Xs("pte",{price:(Z=e==null?void 0:e.quote)==null?void 0:Z.price.amount,quarterIncome:a}),r=parseFloat(t),y=(ae=(te=(ee=(d=e==null?void 0:e.security)==null?void 0:d.keyRatios)==null?void 0:ee.nodes)==null?void 0:te[0])==null?void 0:ae.ptcf,c=(M=(re=(ie=(se=e==null?void 0:e.security)==null?void 0:se.keyRatios)==null?void 0:ie.nodes)==null?void 0:re[0])==null?void 0:M.ptb,b=(Be=(Ce=(ke=(q=e==null?void 0:e.security)==null?void 0:q.keyRatios)==null?void 0:ke.nodes)==null?void 0:Ce[0])==null?void 0:Be.pts,R=(Le=(xe=(Se=(we=e==null?void 0:e.security)==null?void 0:we.keyRatios)==null?void 0:Se.nodes)==null?void 0:xe[0])==null?void 0:Le.bvps,g=(Oe=(Fe=(Me=(Ne=e==null?void 0:e.security)==null?void 0:Ne.keyRatios)==null?void 0:Me.nodes)==null?void 0:Fe[0])==null?void 0:Oe.bvpsTangible,k=(Ie=($e=(Ye=(Ve=e==null?void 0:e.security)==null?void 0:Ve.keyRatios)==null?void 0:Ye.nodes)==null?void 0:$e[0])==null?void 0:Ie.fcfps,T=(Ge=(ze=(He=(Ue=e==null?void 0:e.security)==null?void 0:Ue.keyRatios)==null?void 0:He.nodes)==null?void 0:ze[0])==null?void 0:Ge.marketCap,A=(Xe=(Qe=(We=(je=e==null?void 0:e.security)==null?void 0:je.keyRatios)==null?void 0:We.nodes)==null?void 0:Qe[0])==null?void 0:Xe.ev,l=(et=(de=(Ze=(Je=e==null?void 0:e.security)==null?void 0:Je.keyRatios)==null?void 0:Ze.nodes)==null?void 0:de[0])==null?void 0:et.evebit,_=(Pt=(Dt=(Kt=(tt=e==null?void 0:e.security)==null?void 0:tt.keyRatios)==null?void 0:Kt.nodes)==null?void 0:Dt[0])==null?void 0:Pt.evebitda,K=(Bt=(Ct=(Et=(qt=e==null?void 0:e.security)==null?void 0:qt.keyRatios)==null?void 0:Et.nodes)==null?void 0:Ct[0])==null?void 0:Bt.intcovRatio,h=(Lt=(xt=(St=(wt=e==null?void 0:e.security)==null?void 0:wt.keyRatios)==null?void 0:St.nodes)==null?void 0:xt[0])==null?void 0:Lt.intcovRatio,f=(Ot=(Ft=(Mt=(Nt=e==null?void 0:e.security)==null?void 0:Nt.keyRatios)==null?void 0:Mt.nodes)==null?void 0:Ft[0])==null?void 0:Ot.propRatio,D=(It=($t=(Yt=(Vt=e==null?void 0:e.security)==null?void 0:Vt.keyRatios)==null?void 0:Yt.nodes)==null?void 0:$t[0])==null?void 0:It.dcapRatio,p=(Gt=(zt=(Ht=(Ut=e==null?void 0:e.security)==null?void 0:Ut.keyRatios)==null?void 0:Ht.nodes)==null?void 0:zt[0])==null?void 0:Gt.dfl,C=(Xt=(Qt=(Wt=(jt=e==null?void 0:e.security)==null?void 0:jt.keyRatios)==null?void 0:Wt.nodes)==null?void 0:Qt[0])==null?void 0:Xt.currentRatio,w=(ea=(dt=(Zt=(Jt=e==null?void 0:e.security)==null?void 0:Jt.keyRatios)==null?void 0:Zt.nodes)==null?void 0:dt[0])==null?void 0:ea.quickRatio,S=(ia=(sa=(aa=(ta=e==null?void 0:e.security)==null?void 0:ta.keyRatios)==null?void 0:aa.nodes)==null?void 0:sa[0])==null?void 0:ia.absliqRatio,x=(ca=(la=(ua=(ra=e==null?void 0:e.security)==null?void 0:ra.keyRatios)==null?void 0:ua.nodes)==null?void 0:la[0])==null?void 0:ca.cashRatio,L=(ya=(va=(oa=(na=e==null?void 0:e.security)==null?void 0:na.keyRatios)==null?void 0:oa.nodes)==null?void 0:va[0])==null?void 0:ya.opcfRatio,N=(ba=(ga=(ma=(pa=e==null?void 0:e.security)==null?void 0:pa.keyRatios)==null?void 0:ma.nodes)==null?void 0:ga[0])==null?void 0:ba.profitMargin,B=(Ra=(_a=(fa=(ha=e==null?void 0:e.security)==null?void 0:ha.keyRatios)==null?void 0:fa.nodes)==null?void 0:_a[0])==null?void 0:Ra.grossMargin,Y=(Ka=(Aa=(Ta=(ka=e==null?void 0:e.security)==null?void 0:ka.keyRatios)==null?void 0:Ta.nodes)==null?void 0:Aa[0])==null?void 0:Ka.ebitdaMargin,$=(Ea=(qa=(Pa=(Da=e==null?void 0:e.security)==null?void 0:Da.keyRatios)==null?void 0:Pa.nodes)==null?void 0:qa[0])==null?void 0:Ea.invturnoverRatio,I=(Sa=(wa=(Ba=(Ca=e==null?void 0:e.security)==null?void 0:Ca.keyRatios)==null?void 0:Ba.nodes)==null?void 0:wa[0])==null?void 0:Sa.recturnoverRatio,U=(Ma=(Na=(La=(xa=e==null?void 0:e.security)==null?void 0:xa.keyRatios)==null?void 0:La.nodes)==null?void 0:Na[0])==null?void 0:Ma.capiturnoverRatio,ce=(Ya=(Va=(Oa=(Fa=e==null?void 0:e.security)==null?void 0:Fa.keyRatios)==null?void 0:Oa.nodes)==null?void 0:Va[0])==null?void 0:Ya.assetturnoverRatio,ne=(Ha=(Ua=(Ia=($a=e==null?void 0:e.security)==null?void 0:$a.keyRatios)==null?void 0:Ia.nodes)==null?void 0:Ua[0])==null?void 0:Ha.reccollectionPeriod,oe=(Wa=(ja=(Ga=(za=e==null?void 0:e.security)==null?void 0:za.keyRatios)==null?void 0:Ga.nodes)==null?void 0:ja[0])==null?void 0:Wa.payoutRatio,ve=(Za=(Ja=(Xa=(Qa=e==null?void 0:e.security)==null?void 0:Qa.keyRatios)==null?void 0:Xa.nodes)==null?void 0:Ja[0])==null?void 0:Za.daysinsalesRatio,ye=(as=(ts=(es=(da=e==null?void 0:e.security)==null?void 0:da.keyRatios)==null?void 0:es.nodes)==null?void 0:ts[0])==null?void 0:as.roi,pe=(us=(rs=(is=(ss=e==null?void 0:e.security)==null?void 0:ss.keyRatios)==null?void 0:is.nodes)==null?void 0:rs[0])==null?void 0:us.roe,me=(os=(ns=(cs=(ls=e==null?void 0:e.security)==null?void 0:ls.keyRatios)==null?void 0:cs.nodes)==null?void 0:ns[0])==null?void 0:os.roa,ge=(ms=(ps=(ys=(vs=e==null?void 0:e.security)==null?void 0:vs.keyRatios)==null?void 0:ys.nodes)==null?void 0:ps[0])==null?void 0:ms.ros,O=(fs=(hs=(bs=(gs=e==null?void 0:e.security)==null?void 0:gs.quarterKeyRatios)==null?void 0:bs.nodes)==null?void 0:hs[0])==null?void 0:fs.dte,W=((Rs=(_s=e==null?void 0:e.dividendsList)==null?void 0:_s.nodes)==null?void 0:Rs.length)&&((ks=e==null?void 0:e.dividendsList)==null?void 0:ks.nodes[0].yieldPercent.displayAmount),Q=parseFloat(W),v=[];return u.tableHeaders.map(m=>{m.id==="Price-to-Earnings"&&v.push({componentKey:"simple-value",value:t||"-",key:"pte",color:{red:r<0||r>60,green:r>0&&r<15}}),m.id==="Forward Price-to-Earnings"&&v.push({componentKey:"simple-value",key:"",value:"-"}),m.id==="Price-to-Cash Flow"&&v.push({componentKey:"simple-value",key:"ptcf",value:y||"-"}),m.id==="Price-to-Book"&&v.push({componentKey:"simple-value",key:"ptb",value:c||"-"}),m.id==="Price-to-Sales"&&v.push({componentKey:"simple-value",key:"pts",value:b||"-"}),m.id==="Book Value per Share"&&v.push({componentKey:"simple-value",key:"bvps",value:R||"-"}),m.id==="Tangible Book Value per Share"&&v.push({componentKey:"simple-value",key:"bvpsTangible",value:g||"-"}),m.id==="Free Cash Flow per Share"&&v.push({componentKey:"simple-value",key:"fcfps",value:k||"-"}),m.id==="Market Capitalization"&&v.push({componentKey:"simple-value",key:"marketCap",value:De(T)||"-"}),m.id==="Enterprise Value"&&v.push({componentKey:"simple-value",key:"ev",value:De(A)||"-"}),m.id==="Enterprise Value over EBITDA"&&v.push({componentKey:"simple-value",key:"evebitda",value:_||"-"}),m.id==="Enterprise Value over EBIT"&&v.push({componentKey:"simple-value",key:"evebit",value:l||"-"}),m.id==="Debt-to-Equity"&&v.push({componentKey:"simple-value",value:O||"-",key:"dte",color:{red:O>5||O<0,green:O>0&&O<.5}}),m.id==="Interest Coverage Ratio"&&v.push({componentKey:"simple-value",key:"intcovRatio",value:K||"-"}),m.id==="Debt Service Coverage"&&v.push({componentKey:"simple-value",key:"debtsc",value:h||"-"}),m.id==="Proprietary Ratio"&&v.push({componentKey:"simple-value",key:"propRatio",value:f||"-"}),m.id==="Debt-to-Capitalization Ratio"&&v.push({componentKey:"simple-value",key:"dcapRatio",value:D||"-"}),m.id==="Degree of Financial Leverage"&&v.push({componentKey:"simple-value",key:"dfl",value:p||"-"}),m.id==="Current Ratio"&&v.push({componentKey:"simple-value",key:"currentRatio",value:C||"-"}),m.id==="Quick Ratio"&&v.push({componentKey:"simple-value",key:"quickRatio",value:w||"-"}),m.id==="Absolute Liquidity Ratio"&&v.push({componentKey:"simple-value",key:"absliqRatio",value:S||"-"}),m.id==="Cash Ratio"&&v.push({componentKey:"simple-value",key:"cashRatio",value:x||"-"}),m.id==="Operating Cash Flow Ratio"&&v.push({componentKey:"simple-value",key:"opcfRatio",value:L||"-"}),m.id==="Profit Margin"&&v.push({componentKey:"simple-value",key:"profitMargin",value:N||"-"}),m.id==="Gross Margin"&&v.push({componentKey:"simple-value",key:"grossMargin",value:B||"-"}),m.id==="EBITDA Margin"&&v.push({componentKey:"simple-value",key:"ebitdaMargin",value:Y||"-"}),m.id==="Return on Investment"&&v.push({componentKey:"simple-value",key:"roi",value:ye||"-"}),m.id==="Return on Equity"&&v.push({componentKey:"simple-value",key:"roe",value:pe||"-"}),m.id==="Return on Assets"&&v.push({componentKey:"simple-value",key:"roa",value:me||"-"}),m.id==="Return on Sales"&&v.push({componentKey:"simple-value",key:"ros",value:ge||"-"}),m.id==="Inventory Turnover Ratio"&&v.push({componentKey:"simple-value",key:"invturnoverRatio",value:$||"-"}),m.id==="Receivable Turnover Ratio"&&v.push({componentKey:"simple-value",key:"recturnoverRatio",value:I||"-"}),m.id==="Capital Turnover Ratio"&&v.push({componentKey:"simple-value",key:"capiturnoverRatio",value:U||"-"}),m.id==="Asset Turnover Ratio"&&v.push({componentKey:"simple-value",key:"assetturnoverRatio",value:ce||"-"}),m.id==="Receivable Collection Period"&&v.push({componentKey:"simple-value",key:"reccollectionPeriod",value:ne||"-"}),m.id==="Payout Ratio"&&v.push({componentKey:"simple-value",key:"payoutRatio",value:oe||"-"}),m.id==="Days Sales in Inventory Ratio"&&v.push({componentKey:"simple-value",key:"daysinsalesRatio",value:ve||"-"}),m.id==="Div Yield %"&&v.push({componentKey:"simple-value",value:W||"-",valueNum:Q,color:{green:Q>3},key:"divYield"})}),{...V(e),data:v}});case"valuation":return s.map(e=>{var b,R,g,k,T,A,l,_,K,h,f,D,p,C;const a=(R=(b=e==null?void 0:e.security)==null?void 0:b.keyRatios)==null?void 0:R.nodes,t=(k=(g=e==null?void 0:e.security)==null?void 0:g.statistics)==null?void 0:k.pte,r=(A=(T=e==null?void 0:e.security)==null?void 0:T.statistics)==null?void 0:A.ptb,y=(l=a==null?void 0:a[0])==null?void 0:l.dte,c=(a==null?void 0:a.length)&&((_=a==null?void 0:a[0])==null?void 0:_.profitMargin)*100;return{...V(e),data:[{componentKey:"simple-value",value:t||"-",color:{red:t<0||t>60,green:t>0&&t<15}},{componentKey:"simple-value",value:r||"-",color:{red:r>15||r<0,green:r>0&&r<3}},{componentKey:"simple-value",value:((h=(K=e==null?void 0:e.security)==null?void 0:K.statistics)==null?void 0:h.pts)||"-"},{componentKey:"simple-value",value:y||"-",color:{red:y>5||y<0,green:y>0&&y<.5}},{componentKey:"simple-value",value:c?(c==null?void 0:c.toFixed(2))+"%":"-",color:{red:c<15,green:c>40}},{componentKey:"simple-value",value:(D=(f=e==null?void 0:e.security)==null?void 0:f.statistics)!=null&&D.marketCap?Qs((C=(p=e==null?void 0:e.security)==null?void 0:p.statistics)==null?void 0:C.marketCap):"-"}]}});case"dividend":return s.map(e=>{var k,T,A,l,_,K,h;const a=(k=e==null?void 0:e.dividendsList)==null?void 0:k.nodes;let t=0;a!=null&&a.length&&(t=Ws(a));const r=_e(),y=(T=a==null?void 0:a[0])==null?void 0:T.exDate,c=(A=a==null?void 0:a[1])==null?void 0:A.exDate,b=(a==null?void 0:a.length)&&a[0].yieldPercent.displayAmount,R=parseFloat(b),g=(h=(K=(_=(l=e==null?void 0:e.security)==null?void 0:l.keyRatios)==null?void 0:_.nodes)==null?void 0:K[0])==null?void 0:h.payoutRatio;return{...V(e),data:[{componentKey:"bar-chart",barData:a?[...a].reverse().map(f=>f==null?void 0:f.dividend.amount):[]},{componentKey:"simple-value",value:a!=null&&a.length?De(a[0].dividend.amount,a[0].dividend.currency):"-",valueNum:a!=null&&a.length?a[0].dividend.amount:"-"},{componentKey:"simple-value",value:b||"-",valueNum:j(b)||"-",color:{green:R>3}},{componentKey:"pie-chart",pieData:t!==0?[t>100?100:t,t>100?0:100-t]:[]},{componentKey:"date",date:y&&_e(y).diff(r,"day")<0&&y||c&&_e(c).diff(r,"day")<0&&c||"-"},{componentKey:"date",date:y&&_e(y).diff(r,"day")>=0?y:"-"},{componentKey:"simple-value",value:g,color:{red:g>.75||g<0,green:g>0&&g<.25}}]}});case"operating":return s.map(e=>{var R,g,k,T,A,l,_,K,h,f,D;const a=((g=(R=e==null?void 0:e.security)==null?void 0:R.keyRatios)==null?void 0:g.nodes)||[],t=((T=(k=e==null?void 0:e.security)==null?void 0:k.balanceSheets)==null?void 0:T.nodes)||[],r=(A=a==null?void 0:a[0])==null?void 0:A.roe,y=(l=a==null?void 0:a[0])==null?void 0:l.roa,c=((_=t==null?void 0:t[0])==null?void 0:_.debt)&&parseInt((K=t==null?void 0:t[0])==null?void 0:K.assets)&&((h=t==null?void 0:t[0])==null?void 0:h.debt)/((f=t==null?void 0:t[0])==null?void 0:f.assets)*100,b=(D=a==null?void 0:a[0])==null?void 0:D.reccollectionPeriod;return{...V(e),data:[{componentKey:"simple-value",value:r||"-",color:{red:r<-10,green:r>40}},{componentKey:"bar-chart",barData:[...a].reverse().map(p=>p==null?void 0:p.roe)},{componentKey:"simple-value",value:y||"-",color:{red:y<0,green:y>20}},{componentKey:"bar-chart",barData:[...a].reverse().map(p=>p==null?void 0:p.roa)},{componentKey:"bar-chart",barData:[...t].reverse().map(p=>p==null?void 0:p.assets)},{componentKey:"bar-chart",barData:[...t].reverse().map(p=>p==null?void 0:p.liabilities)},{componentKey:"simple-value",value:c&&(c==null?void 0:c.toFixed(2))+"%"||"-",color:{red:c>50,green:c<30}},{componentKey:"simple-value",value:b||"-",color:{red:b>80,green:b<30}}]}});case"financial":return s.map(e=>{var k,T,A,l,_,K,h,f,D,p,C,w,S,x,L,N;const a=((T=(k=e==null?void 0:e.security)==null?void 0:k.incomeStatements)==null?void 0:T.nodes)||[],t=((l=(A=e==null?void 0:e.security)==null?void 0:A.balanceSheets)==null?void 0:l.nodes)||[],r=((_=a==null?void 0:a[0])==null?void 0:_.totalRevenue)&&parseInt((K=a==null?void 0:a[1])==null?void 0:K.totalRevenue)&&Te((h=a==null?void 0:a[0])==null?void 0:h.totalRevenue,(f=a==null?void 0:a[1])==null?void 0:f.totalRevenue),y=parseFloat(r),c=((D=a==null?void 0:a[0])==null?void 0:D.incomeNet)&&parseInt((p=a==null?void 0:a[1])==null?void 0:p.incomeNet)&&Te((C=a==null?void 0:a[0])==null?void 0:C.incomeNet,(w=a==null?void 0:a[1])==null?void 0:w.incomeNet),b=c&&j(c),R=((S=t==null?void 0:t[0])==null?void 0:S.equity)&&parseInt((x=t==null?void 0:t[1])==null?void 0:x.equity)&&Te((L=t==null?void 0:t[0])==null?void 0:L.equity,(N=t==null?void 0:t[1])==null?void 0:N.equity),g=R&&j(R);return{...V(e),data:[{componentKey:"simple-value",value:r||"-",color:{red:y<-10,green:y>20}},{componentKey:"bar-chart",barData:[...a].reverse().map(B=>B.totalRevenue)},{componentKey:"simple-value",value:c||"-",color:{red:typeof b=="number"&&b<-20,green:typeof b=="number"&&b>20}},{componentKey:"bar-chart",barData:[...a].reverse().map(B=>B.incomeNet)},{componentKey:"simple-value",value:R||"-",color:{red:typeof g=="number"&&g<-20,green:typeof g=="number"&&g>20}},{componentKey:"bar-chart",barData:[...t].reverse().map(B=>B.equity)}]}});case"proprietary":return s.map(e=>({...V(e),data:[{componentKey:"value",isFair:!0,value:"33.45$"},{componentKey:"distance",positive:!0},{componentKey:"polar-chart"},{componentKey:"analyst",positive:!1,status:"sell"},{componentKey:"tag",positive:!1,value:"SELL"},{componentKey:"arrow-value",positive:!0},{componentKey:"arrow-value",positive:!0},{componentKey:"pie-chart",status:"hold"},{componentKey:"value",value:"2"}]}));case"performance":return s.map(e=>({...V(e),data:[{componentKey:"line-chart",positive:!0},{componentKey:"arrow-value",positive:!0},{componentKey:"pie-chart",status:"hold"},{componentKey:"pie-chart",status:"hold"},{componentKey:"distance",positive:!0},{componentKey:"simple-value",positive:!0,hasArrow:!0,value:"18.00$"},{componentKey:"simple-value",value:"+18.00$"}]}));case"change":return s.map(e=>({...V(e),data:[{componentKey:"tag",positive:!1,value:"STRONG SELL"},{componentKey:"tag",positive:!1,value:"SELL"},{componentKey:"value",isFair:!0,value:"33.45$"},{componentKey:"value",isFair:!0,value:"33.45$"},{componentKey:"polar-chart"},{componentKey:"polar-chart"}]}));case"fair_value_hits":return s.map(e=>({...V(e),data:[{componentKey:"tag",positive:!1,value:"SELL"},{componentKey:"value",isFair:!0,value:"34.44$"},{componentKey:"date"},{componentKey:"simple-value",value:"18.00%"}]}));default:return s.map(e=>({...V(e)}))}},At=s=>{switch(s.dropdownEvent.title){case Ys.REMOVE_FROM_WATCHLIST:i.value=i.value.map(e=>(e.bgColorClass=e.id===s.tableItem.id?"bg-bubble-gum":"",e));break}},pt=(s,e="")=>{["screener","screener-extra"].includes(u.type||"")?G.fetchScreenerStocks(o.getActiveTab.id,u.period||"ANNUAL",e,u.takeFilterArgsFromStr?o.getActiveFilterDataStr:o.getActiveFilter,u.takeFilterArgsFromStr).then(()=>{var a,t;if(s!==ut)return pt(s+1,(t=(a=G.getStocksComponents)==null?void 0:a.pageInfo)==null?void 0:t.endCursor)}):G.fetchStocksComponents(u==null?void 0:u.type,o.getActiveTab.id,u==null?void 0:u.parent,u.period||"ANNUAL",e,"",u.stockIdentifierType).then(()=>{var a,t;if(s!==ut)return pt(s+1,(t=(a=G.getStocksComponents)==null?void 0:a.pageInfo)==null?void 0:t.endCursor)})},mt=()=>{var s;Ee.value=!0,u.stocksList&&(i.value=qs(u.stocksList||[])||[],i.value=(s=i.value)==null?void 0:s.sort((e,a)=>parseFloat(a==null?void 0:a.percent)-parseFloat(e==null?void 0:e.percent)),vt.value=u.pageInfo),Ee.value=!1},gt=fe("desc"),Es=(s,e)=>{const a=(t,r,y=!1)=>t!=="-"?y?parseFloat(t):t:r==="asc"?1/0:-1/0;switch(!0){case(u.tab==="portfolio"&&s===5):console.log(i.value),i.value=n.orderBy(i.value,t=>parseFloat(t.data.find(r=>r.key==="percentOfPortfolio").valueNum),e);break;case(u.tab==="industry_insight"&&s==="Price-to-Earnings"):i.value=n.orderBy(i.value,t=>parseFloat(t.data.find(r=>r.key==="pte").value),e);break;case(u.tab==="industry_insight"&&s==="Forward Price-to-Earnings"):break;case(u.tab==="industry_insight"&&s==="Price-to-Cash Flow"):i.value=n.orderBy(i.value,t=>a(t.data.find(r=>r.key==="ptcf").value,e),e);break;case(u.tab==="industry_insight"&&s==="Price-to-Book"):i.value=n.orderBy(i.value,t=>a(t.data.find(r=>r.key==="ptb").value,e),e);break;case(u.tab==="industry_insight"&&s==="Price-to-Sales"):i.value=n.orderBy(i.value,t=>a(t.data.find(r=>r.key==="pts").value,e),e);break;case(u.tab==="industry_insight"&&s==="Book Value per Share"):i.value=n.orderBy(i.value,t=>a(t.data.find(r=>r.key==="bvps").value,e),e);break;case(u.tab==="industry_insight"&&s==="Tangible Book Value per Share"):i.value=n.orderBy(i.value,t=>a(t.data.find(r=>r.key==="bvpsTangible").value,e),e);break;case(u.tab==="industry_insight"&&s==="Free Cash Flow per Share"):i.value=n.orderBy(i.value,t=>a(t.data.find(r=>r.key==="fcfps").value,e),e);break;case(u.tab==="industry_insight"&&s==="Market Capitalization"):i.value=n.orderBy(i.value,t=>j(t.data.find(r=>r.key==="marketCap").value),e);break;case(u.tab==="industry_insight"&&s==="Enterprise Value"):i.value=n.orderBy(i.value,t=>j(t.data.find(r=>r.key==="ev").value),e);break;case(u.tab==="industry_insight"&&s==="Enterprise Value over EBITDA"):i.value=n.orderBy(i.value,t=>a(t.data.find(r=>r.key==="evebitda").value,e),e);break;case(u.tab==="industry_insight"&&s==="Enterprise Value over EBIT"):i.value=n.orderBy(i.value,t=>a(t.data.find(r=>r.key==="evebit").value,e),e);break;case(u.tab==="industry_insight"&&s==="Debt-to-Equity"):i.value=n.orderBy(i.value,t=>a(t.data.find(r=>r.key==="dte").value,e),e);break;case(u.tab==="industry_insight"&&s==="Interest Coverage Ratio"):i.value=n.orderBy(i.value,t=>a(t.data.find(r=>r.key==="intcovRatio").value,e),e);break;case(u.tab==="industry_insight"&&s==="Debt Service Coverage"):i.value=n.orderBy(i.value,t=>a(t.data.find(r=>r.key==="debtsc").value,e),e);break;case(u.tab==="industry_insight"&&s==="Proprietary Ratio"):i.value=n.orderBy(i.value,t=>a(t.data.find(r=>r.key==="propRatio").value,e),e);break;case(u.tab==="industry_insight"&&s==="Debt-to-Capitalization Ratio"):i.value=n.orderBy(i.value,t=>a(t.data.find(r=>r.key==="dcapRatio").value,e),e);break;case(u.tab==="industry_insight"&&s==="Degree of Financial Leverage"):i.value=n.orderBy(i.value,t=>a(t.data.find(r=>r.key==="dfl").value,e),e);break;case(u.tab==="industry_insight"&&s==="Current Ratio"):i.value=n.orderBy(i.value,t=>a(t.data.find(r=>r.key==="currentRatio").value,e),e);break;case(u.tab==="industry_insight"&&s==="Quick Ratio"):i.value=n.orderBy(i.value,t=>a(t.data.find(r=>r.key==="quickRatio").value,e),e);break;case(u.tab==="industry_insight"&&s==="Absolute Liquidity Ratio"):i.value=n.orderBy(i.value,t=>a(t.data.find(r=>r.key==="absliqRatio").value,e),e);break;case(u.tab==="industry_insight"&&s==="Cash Ratio"):i.value=n.orderBy(i.value,t=>a(t.data.find(r=>r.key==="cashRatio").value,e),e);break;case(u.tab==="industry_insight"&&s==="Operating Cash Flow Ratio"):i.value=n.orderBy(i.value,t=>a(t.data.find(r=>r.key==="opcfRatio").value,e),e);break;case(u.tab==="industry_insight"&&s==="Profit Margin"):i.value=n.orderBy(i.value,t=>a(t.data.find(r=>r.key==="profitMargin").value,e),e);break;case(u.tab==="industry_insight"&&s==="Gross Margin"):i.value=n.orderBy(i.value,t=>a(t.data.find(r=>r.key==="grossMargin").value,e),e);break;case(u.tab==="industry_insight"&&s==="EBITDA Margin"):i.value=n.orderBy(i.value,t=>a(t.data.find(r=>r.key==="ebitdaMargin").value,e),e);break;case(u.tab==="industry_insight"&&s==="Return on Investment"):i.value=n.orderBy(i.value,t=>a(t.data.find(r=>r.key==="roi").value,e),e);break;case(u.tab==="industry_insight"&&s==="Return on Equity"):i.value=n.orderBy(i.value,t=>a(t.data.find(r=>r.key==="roe").value,e),e);break;case(u.tab==="industry_insight"&&s==="Return on Assets"):i.value=n.orderBy(i.value,t=>a(t.data.find(r=>r.key==="roa").value,e),e);break;case(u.tab==="industry_insight"&&s==="Return on Sales"):i.value=n.orderBy(i.value,t=>a(t.data.find(r=>r.key==="ros").value,e),e);break;case(u.tab==="industry_insight"&&s==="Inventory Turnover Ratio"):i.value=n.orderBy(i.value,t=>a(t.data.find(r=>r.key==="invturnoverRatio").value,e),e);break;case(u.tab==="industry_insight"&&s==="Receivable Turnover Ratio"):i.value=n.orderBy(i.value,t=>a(t.data.find(r=>r.key==="recturnoverRatio").value,e),e);break;case(u.tab==="industry_insight"&&s==="Capital Turnover Ratio"):i.value=n.orderBy(i.value,t=>a(t.data.find(r=>r.key==="capiturnoverRatio").value,e),e);break;case(u.tab==="industry_insight"&&s==="Asset Turnover Ratio"):i.value=n.orderBy(i.value,t=>a(t.data.find(r=>r.key==="assetturnoverRatio").value,e),e);break;case(u.tab==="industry_insight"&&s==="Receivable Collection Period"):i.value=n.orderBy(i.value,t=>a(t.data.find(r=>r.key==="reccollectionPeriod").value,e),e);break;case(u.tab==="industry_insight"&&s==="Payout Ratio"):i.value=n.orderBy(i.value,t=>a(t.data.find(r=>r.key==="payoutRatio").value,e),e);break;case(u.tab==="industry_insight"&&s==="Days Sales in Inventory Ratio"):i.value=n.orderBy(i.value,t=>a(t.data.find(r=>r.key==="daysinsalesRatio").value,e),e);break;case(u.tab==="industry_insight"&&s==="Div Yield %"):i.value=n.orderBy(i.value,t=>a(t.data.find(r=>r.key==="divYield").valueNum,e),e);break;case(o.getActiveTab.id==="basic"&&s===1):i.value=n.orderBy(i.value,t=>a(t.data[0].data.percent,e,!0),e);break;case(o.getActiveTab.id==="basic"&&s===2):i.value=n.orderBy(i.value,t=>parseFloat(t.data[1].value.replace("$","").replace(",","")),e);break;case(o.getActiveTab.id==="basic"&&s===3):i.value=n.orderBy(i.value,t=>j(a(t.data[2].percent,e,!0)),e);break;case(o.getActiveTab.id==="basic"&&s===5):i.value=n.orderBy(i.value,t=>j(a(t.data[4].value,e,!0)),e);break;case(o.getActiveTab.id==="basic"&&s===6):console.log(i.value),i.value=n.orderBy(i.value,t=>a(t.data[5].value,e,!0),e);break;case(o.getActiveTab.id==="basic"&&s===7):i.value=n.orderBy(i.value,t=>t.data[6].value,e);break;case(o.getActiveTab.id==="rating_and_fair_values"&&s===0):i.value=n.orderBy(i.value,t=>a(t.data[0].valueNum,e),e);break;case(o.getActiveTab.id==="rating_and_fair_values"&&s===1):i.value=n.orderBy(i.value,t=>a(t.data[1].valueNum,e),e);break;case(o.getActiveTab.id==="rating_and_fair_values"&&s===2):i.value=n.orderBy(i.value,t=>a(t.data[2].valueNum,e),e);break;case(o.getActiveTab.id==="rating_and_fair_values"&&s===3):i.value=n.orderBy(i.value,t=>a(t.data[3].valueNum,e),e);break;case(o.getActiveTab.id==="rating_and_fair_values"&&s===4):i.value=n.orderBy(i.value,t=>a(t.data[4].value,e),e);break;case(o.getActiveTab.id==="rating_and_fair_values"&&s===5):i.value=n.orderBy(i.value,t=>a(t.data[5].value,e),e);break;case(o.getActiveTab.id==="rating_and_fair_values"&&s===6):i.value=n.orderBy(i.value,t=>a(t.data[6].value,e),e);break;case(o.getActiveTab.id==="valuation"&&s===3):i.value=n.orderBy(i.value,t=>a(t.data[0].value,e),e);break;case(o.getActiveTab.id==="valuation"&&s===4):i.value=n.orderBy(i.value,t=>a(t.data[1].value,e),e);break;case(o.getActiveTab.id==="valuation"&&s===5):i.value=n.orderBy(i.value,t=>a(t.data[2].value,e),e);break;case(o.getActiveTab.id==="valuation"&&s===6):i.value=n.orderBy(i.value,t=>a(t.data[3].value,e),e);break;case(o.getActiveTab.id==="valuation"&&s===7):i.value=n.orderBy(i.value,t=>a(t.data[4].value,e,!0),e);break;case(o.getActiveTab.id==="valuation"&&s===8):i.value=n.orderBy(i.value,t=>j(a(t.data[5].value,e)),e);break;case(o.getActiveTab.id==="dividend"&&s===2):i.value=n.orderBy(i.value,t=>a(t.data[1].valueNum,e),e);break;case(o.getActiveTab.id==="dividend"&&s===3):i.value=n.orderBy(i.value,t=>a(t.data[2].valueNum,e),e);break;case(o.getActiveTab.id==="dividend"&&s===4):i.value=n.orderBy(i.value,t=>t.data[3].pieData.length?t.data[3].pieData[0]:e==="asc"?1/0:-1/0,e);break;case(o.getActiveTab.id==="dividend"&&s===5):i.value=n.orderBy(i.value,t=>t.data[4].date!=="-"?Date.parse(t.data[4].date):e==="asc"?Date.parse("4000-01-01"):Date.parse("0"),e);break;case(o.getActiveTab.id==="dividend"&&s===8):i.value=n.orderBy(i.value,t=>a(t.data[6].value,e),e);break;case(o.getActiveTab.id==="financial"&&s===1):i.value=n.orderBy(i.value,t=>j(a(t.data[0].value,e)),e);break;case(o.getActiveTab.id==="financial"&&s===3):i.value=n.orderBy(i.value,t=>j(a(t.data[2].value,e)),e);break;case(o.getActiveTab.id==="financial"&&s===5):i.value=n.orderBy(i.value,t=>j(a(t.data[4].value,e)),e);break;case(o.getActiveTab.id==="operating"&&s===0):i.value=n.orderBy(i.value,t=>a(t.data[0].value,e),e);break;case(o.getActiveTab.id==="operating"&&s===2):i.value=n.orderBy(i.value,t=>a(t.data[2].value,e),e);break;case(o.getActiveTab.id==="operating"&&s===6):i.value=n.orderBy(i.value,t=>j(a(t.data[6].value,e)),e);break;case(o.getActiveTab.id==="operating"&&s===8):i.value=n.orderBy(i.value,t=>a(t.data[7].value,e),e);break}gt.value=gt.value==="desc"?"asc":"desc"};_t(()=>u.stocksList,mt),_t(()=>[o.getActiveTab,u.period],()=>{Ee.value=!0,pt(0)});const bt=fe(""),ht=fe([]);_t(()=>[bt.value,i.value],([s,e])=>{s?ht.value=e.filter(a=>a.symbol.toLowerCase().includes(s.toLowerCase())||a.name.toLowerCase().includes(s.toLowerCase())):ht.value=e},{immediate:!0});const Cs=[{id:1,title:"1D"},{id:2,title:"7D"},{id:3,title:"3M"},{id:4,title:"1Y"},{id:5,title:"YTD"}],Re=fe("1D"),le=fe(null),Bs=async s=>{Re.value=s.title;const e=_e().subtract(1,"year").toISOString(),a=_e().subtract(3,"month").toISOString();_e().startOf("day").subtract(7,"day").toISOString();const t=_e().subtract(5,"day").toISOString(),r=_e().startOf("year").toISOString(),{data:y}=await G.fetchMultipleStock(i.value.map(c=>c.symbol),`{
        symbol
        q1D: intradayPrices( startDate: "${t}", frequency: ONE_HOUR, last: 10 ) {
            nodes {
                close { amount }
            }
        }
        quote {
            changePercent {
                displayAmount ( suffix: "%" )
            }
        }
        q7D: closingPricePreviews {
            close { amount }
        }

        q3M: closingPrices (first: 50, startDate: "${a}", frequency: WEEKLY) {
            nodes {
                close { amount }
            }
        }
        q1Y: closingPrices (first: 50, startDate: "${e}", frequency: WEEKLY) {
            nodes {
                close { amount }
            }
        }
        qYTD: closingPrices (first: 50, startDate: "${r}", frequency: WEEKLY) {
            nodes {
                close { amount }
            }
        }
    }`);le.value=y.stocks.nodes.map(c=>{var b,R,g,k,T,A,l,_,K,h,f,D,p,C,w,S,x,L,N,B,Y,$,I,U,ce,ne,oe,ve,ye,pe,me,ge,O,W,Q,v,X,J,Z,d,ee,te,ae,se,ie,re,M,q,ke,Ce,Be,we,Se,xe,Le,Ne,Me,Fe,Oe,Ve,Ye,$e,Ie,Ue,He,ze,Ge,je,We,Qe,Xe,Je,Ze,de,et,tt;return{symbol:c.symbol,q1D:{nodes:(b=c.q1Del)==null?void 0:b.nodes,percent:Te((T=(k=(g=(R=c.q1D)==null?void 0:R.nodes)==null?void 0:g[0])==null?void 0:k.close)==null?void 0:T.amount,(h=(K=(_=(A=c.q1D)==null?void 0:A.nodes)==null?void 0:_[((l=c.q1D)==null?void 0:l.nodes.length)-1])==null?void 0:K.close)==null?void 0:h.amount),trend:((p=(D=(f=c.q1D)==null?void 0:f[0])==null?void 0:D.close)==null?void 0:p.amount)>((S=(w=(C=c.q1D)==null?void 0:C[6])==null?void 0:w.close)==null?void 0:S.amount)},q7D:{nodes:c.q7D,percent:Te((N=(L=(x=c.q7D)==null?void 0:x[0])==null?void 0:L.close)==null?void 0:N.amount,($=(Y=(B=c.q7D)==null?void 0:B[6])==null?void 0:Y.close)==null?void 0:$.amount),trend:((ce=(U=(I=c.q7D)==null?void 0:I[0])==null?void 0:U.close)==null?void 0:ce.amount)>((ve=(oe=(ne=c.q7D)==null?void 0:ne[6])==null?void 0:oe.close)==null?void 0:ve.amount)},q3M:{nodes:c.q3M.nodes,percent:Te((me=(pe=(ye=c.q3M)==null?void 0:ye.nodes[0])==null?void 0:pe.close)==null?void 0:me.amount,(v=(Q=(W=c.q3M)==null?void 0:W.nodes[((O=(ge=c.q3M)==null?void 0:ge.nodes)==null?void 0:O.length)-1])==null?void 0:Q.close)==null?void 0:v.amount),trend:((Z=(J=(X=c.q3M)==null?void 0:X.nodes[0])==null?void 0:J.close)==null?void 0:Z.amount)>((se=(ae=(te=c.q3M)==null?void 0:te.nodes[((ee=(d=c.q3M)==null?void 0:d.nodes)==null?void 0:ee.length)-1])==null?void 0:ae.close)==null?void 0:se.amount)},q1Y:{nodes:c.q1Y.nodes,percent:Te((M=(re=(ie=c.q1Y)==null?void 0:ie.nodes[0])==null?void 0:re.close)==null?void 0:M.amount,(we=(Be=(Ce=c.q1Y)==null?void 0:Ce.nodes[((ke=(q=c.q1Y)==null?void 0:q.nodes)==null?void 0:ke.length)-1])==null?void 0:Be.close)==null?void 0:we.amount),trend:((Le=(xe=(Se=c.q1Y)==null?void 0:Se.nodes[0])==null?void 0:xe.close)==null?void 0:Le.amount)>((Ve=(Oe=(Fe=c.q1Y)==null?void 0:Fe.nodes[((Me=(Ne=c.q1Y)==null?void 0:Ne.nodes)==null?void 0:Me.length)-1])==null?void 0:Oe.close)==null?void 0:Ve.amount)},qYTD:{nodes:c.qYTD.nodes,percent:Te((Ie=($e=(Ye=c.qYTD)==null?void 0:Ye.nodes[0])==null?void 0:$e.close)==null?void 0:Ie.amount,(je=(Ge=(ze=c.qYTD)==null?void 0:ze.nodes[((He=(Ue=c.qYTD)==null?void 0:Ue.nodes)==null?void 0:He.length)-1])==null?void 0:Ge.close)==null?void 0:je.amount),trend:((Xe=(Qe=(We=c.qYTD)==null?void 0:We.nodes[0])==null?void 0:Qe.close)==null?void 0:Xe.amount)>((tt=(et=(de=c.qYTD)==null?void 0:de.nodes[((Ze=(Je=c.qYTD)==null?void 0:Je.nodes)==null?void 0:Ze.length)-1])==null?void 0:et.close)==null?void 0:tt.amount)}}}),mt()};return Ls(()=>{o.setSelectedScreenerConfig(Ts.value),Ae("table-resize"),mt()}),(s,e)=>{var c,b,R,g,k,T,A;const a=$s,t=Is,r=Us,y=Hs;return E(),F("div",{class:lt({"cursor-progress":s.tableItemsDynamicallyLoading})},[(Ee.value||u.isLoadingViaProp)&&!s.tableItemsDynamicallyLoading&&!(((b=(c=at(G).getStocksComponents)==null?void 0:c.nodes)==null?void 0:b.length)>0)?(E(),F("div",Zs,[Rt(a)])):ue("",!0),P("table",{class:lt(["w-full",{"opacity-0":(Ee.value||u.isLoadingViaProp)&&!(((g=(R=at(G).getStocksComponents)==null?void 0:R.nodes)==null?void 0:g.length)>0)}]),id:"table-resize"},[P("tr",{class:lt(["bg-icon-bg border-[1px] border-mischka",{"disabled-element pointer-events-none":s.tableItemsDynamicallyLoading}])},[P("th",ds,[P("div",ei,[P("span",ti,Ke(((k=s.aggInfo)==null?void 0:k.totalItems)||0)+" Results ",1),P("div",ai,[P("img",{src:"/img/screener/icons/search.svg",alt:"search"},null,8,si),Ns(P("input",{"onUpdate:modelValue":e[0]||(e[0]=l=>bt.value=l),class:"w-full bg-transparent font-normal pl-1 text-xs leading-3 text-secondary-text",type:"text",placeholder:"Symbol"},null,512),[[Ms,bt.value]])])])]),(E(!0),F(st,null,kt(ot.value,(l,_)=>(E(),F(st,null,[(l==null?void 0:l.id)==="weight"&&u.type==="etf"||l!=null&&l.show?(E(),F("th",{key:_,class:"border-r-[1px] w-fit border-mischka relative"},[P("div",ii,[l.hasInfo?(E(),F("img",{key:0,width:"10",height:"10",class:"object-contain",src:"/img/pages/profile/info-icon.svg",alt:"Info icon"},null,8,ri)):ue("",!0),P("span",ui,Ke(l.title),1),l.sort?(E(),F("div",{key:1,onClick:()=>Es(l.id,gt.value),class:"flex flex-col justify-between cursor-pointer"},[P("img",{class:"mb-1 translate-x-[1px] min-w-[8px]",src:"/img/screener/icons/arrow.svg",alt:""},null,8,ci),P("img",{class:"rotate-180 min-w-[8px]",src:"/img/screener/icons/arrow.svg",alt:""},null,8,ni)],8,li)):ue("",!0),l.withPeriodSelection?(E(),it(t,{key:2,class:"",placeholder:" ",selected:Re.value,withoutStylization:"",items:Cs,"has-slot":"",onChangeActiveTimeSelect:Bs},{prefix:Tt(()=>[oi]),_:1},8,["selected"])):ue("",!0)])])):ue("",!0)],64))),256)),P("th",null,[P("div",vi,[P("button",{ref:"filterButton",id:"filterButton",onClick:Ds,class:"ml-auto flex items-center justify-center min-w-[2rem] max-w-[2rem]"},[P("img",{src:"/img/screener/icons/setting.svg",alt:"setting"},null,8,yi)],512)])])],2),i.value?(E(),it(Vs,{key:0,name:"list"},{default:Tt(()=>[(E(!0),F(st,null,kt(ht.value,(l,_)=>{var K;return E(),F("tr",{key:_,class:lt(["w-full border-mischka border-b-[1px] transition-all",l==null?void 0:l.bgColorClass])},[P("td",pi,[Rt(r,{class:"p-5 pr-0 flex items-center",to:`/${(l==null?void 0:l.securityType)==="ETF"?"company-etf":"company"}/${(K=l==null?void 0:l.symbol)==null?void 0:K.toLowerCase()}`},{default:Tt(()=>[l!=null&&l[Pe.value+"Logo"]?(E(),F("img",{key:0,width:"32",height:"32",class:"mr-2 object-contain rounded",src:l==null?void 0:l[Pe.value+"Logo"],alt:l==null?void 0:l.name},null,8,mi)):ue("",!0),P("span",gi,[P("span",bi,[Fs(Ke(l==null?void 0:l.symbol)+" ",1),P("span",hi,Ke(l==null?void 0:l.name),1)]),P("span",fi,Ke(l==null?void 0:l.exchange)+" - "+Ke(l==null?void 0:l.currency),1)])]),_:2},1032,["to"])]),(E(!0),F(st,null,kt(l==null?void 0:l.data,(h,f)=>{var D,p;return E(),F(st,null,[((D=ot.value[f])==null?void 0:D.id)==="weight"&&u.type==="etf"||(p=ot.value[f])!=null&&p.show?(E(),F("td",{key:f,class:"py-2"},[(E(),it(Os(qe[h==null?void 0:h.componentKey]),{item:h},null,8,["item"]))])):ue("",!0)],64)}),256)),P("td",_i,[P("div",Ri,[s.type==="watchlist"?(E(),it(y,{key:0,items:[{id:"3",title:"Remove from Watchlist",icon:"img/components/three-circle-drop-btn/trash",needPremium:!1},{id:"2",title:"Add Trigger",icon:"img/components/three-circle-drop-btn/clock",needPremium:!1}],tableItem:l,watchlist:s.parent,onSelectOption:At},null,8,["tableItem","watchlist"])):(E(),it(y,{key:1,items:[{id:"1",title:"Add to Watchlist",icon:"img/components/three-circle-drop-btn/add",needPremium:!1},{id:"2",title:"Add Trigger",icon:"img/components/three-circle-drop-btn/clock",needPremium:!1}],tableItem:l,onSelectOption:At},null,8,["tableItem"]))])])],2)}),128))]),_:1})):ue("",!0)],2),yt.value?(E(),F("div",ki,[Rt(a)])):ue("",!0),P("div",Ti,[(T=vt.value)!=null&&T.hasNextPage&&at(be).getIsLoggedIn?(E(),F("button",{key:0,onClick:Ps,class:"bg-transparent mx-auto text-primary font-medium text-[18px]"},"Show More Stocks ")):ue("",!0),(A=vt.value)!=null&&A.hasNextPage&&!at(be).getIsLoggedIn?(E(),F("button",{key:1,onClick:e[1]||(e[1]=l=>at(he).gatedModalState=!0),class:"bg-transparent mx-auto text-primary font-medium text-[18px]"},"Show More Stocks ")):ue("",!0)])],2)}}});export{Ci as _};