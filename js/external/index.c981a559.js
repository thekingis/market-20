/* empty css                      */import{A as gt,e as xt,t as dt,s as ht,j as _t,u as yt,b as wt}from"./utils.11774da7.js";import{d as ut,m as bt,a as I,aT as Ct,ax as _,r as P,o as n,c as u,b as a,n as mt,g as S,t as y,i as w,F,j as U,f as G,w as X,k as L,e as C,h as k,y as At,p as $t,z as Lt,l as Bt,aB as It,aQ as Et,aC as V,bg as Rt}from"./entry.8bd29e6a.js";import{_ as Wt}from"./SmallLoader.a34eb8b6.js";/* empty css                        */import{u as ft}from"./useWatchlistStore.a64354a0.js";import"./ThreeCircleDropBtn.vue.c33fc0c3.js";import"./useTriggersStore.ac1fc0eb.js";import"./useMetaStore.36382d3f.js";import{u as Tt}from"./useNewsStore.16e48ef7.js";/* empty css                  */import"./FilterPivot.vue.90cc88c0.js";import"./index.esm.min.ffebd841.js";import"./usePremiumGatedStore.38a9130d.js";import"./image-options.0ae7f2f4.js";import{_ as Pt}from"./DeleteWatchlist.vue.13823ddf.js";import{_ as qt}from"./Wrapper.vue.f6292c26.js";import{_ as vt}from"./nuxt-link.a6eea277.js";import{_ as jt}from"./PieChart.vue.50cabfbb.js";import{_ as Dt}from"./NetworkingChart.vue.e1893fe2.js";import{_ as Ht}from"./nuxt-icon.vue.2d6fd5e1.js";import{_ as Ft}from"./StateBoxes.vue.e350f049.js";import{_ as kt}from"./trash.20734276.js";import{g as Ot,i as zt,a as St,b as Vt}from"./activeTab.8ac3288d.js";import"./_plugin-vue_export-helper.c27b6911.js";import"./useClickOutsideUpdated.43723e42.js";import"./useIdeasStore.76560d63.js";import"./SmallSpinnerLoader.vue.0773deb7.js";import"./SearchHeaderInput.vue.2d9be000.js";import"./SwitchCheckBox.vue.26346bdb.js";import"./FormCheckbox.vue.e7c6dfe6.js";import"./LineChart.vue.36290516.js";import"./index.eed71953.js";import"./useClickOutside.6904fd8d.js";import"./UpcomingAccordion.vue.2b60c346.js";import"./RatioBox.vue.9254e0d8.js";import"./index.3f0d1896.js";const Ut={class:"flex flex-col"},Gt={class:"text-xl flex items-center gap-2.5"},Jt={class:"border border-mischka rounded-lg flex-grow flex flex-col"},Qt={class:"flex items-stretch flex-wrap md:flex-nowrap"},Kt={class:"text-[22px] font-bold"},Xt=a("span",{class:"text-sm"},"Number of Stocks",-1),Yt={class:"bg-deep-cove w-[35px] h-[35px] rounded-full text-white flex items-center justify-center font-bold text-xl relative"},Zt=a("span",{class:"absolute block top-0 right-[3px] bg-red w-[7px] h-[7px] rounded-full"},null,-1),Nt={class:"text-sm mt-[2px] relative"},Mt=a("p",{class:"col-span-2 mb-1.5 text-sm block w-full"},"Movers",-1),ts=["src","alt"],ss={class:"font-bold"},es={class:"text-xs"},as={class:"border-t border-mischka flex items-stretch flex-wrap md:flex-nowrap mt-auto"},ls=a("p",{class:"text-sm"},"Rating Distribution",-1),os={class:"flex-grow mt-3 flex items-center gap-6 flex-wrap md:flex-nowrap"},is={class:"flex justify-center w-full md:w-auto flex-wrap md:flex-col gap-2.5"},ns={class:"flex items-center gap-2"},rs={class:"text-[10px] font-bold"},ms=a("p",{class:"text-sm"},"Alignment Distribution",-1),cs={class:"flex items-center justify-center md:justify-start mt-3 flex-wrap md:flex-nowrap gap-[40px]"},ps={class:"flex items-center justify-between px-[1px] mb-0.5 mt-0.5 pr-[3px]"},ds=a("img",{src:kt,class:"mb-[2px] w-[15px]",alt:""},null,-1),T="px-5",Y="w-full md:w-[43%]",Z="w-full md:w-[57%]",ct="md:pl-[25px] xl:pl-[38px]",us="md:ml-[25px] xl:ml-[38px]",pt=7,fs=ut({__name:"WatchlistCard",props:{watchlist:{default:()=>({})}},setup(N){const f=N,O=bt(),B=I(()=>O.getTheme===Ct.LIGHT),J=ft(),g=I(()=>{var s,i,c,r,p,m;return((c=((i=(s=f.watchlist)==null?void 0:s.stocksAggregate)==null?void 0:i.dimensionalAlignments)||[])==null?void 0:c.reduce((o,d)=>{var t;return o+=(t=d==null?void 0:d.scorePercent)==null?void 0:t.mathAmount},0))/((m=(p=(r=f.watchlist)==null?void 0:r.stocksAggregate)==null?void 0:p.dimensionalAlignments)==null?void 0:m.length)}),A=I(()=>gt(g.value)),E=_(),R=_().startOf("day").add(pt,"day"),b=I(()=>{var s,i,c,r,p,m,o,d;return{companyEarning:{amount:((r=(c=(i=(s=f.watchlist)==null?void 0:s.calendarEvents)==null?void 0:i.nodes)==null?void 0:c.filter(t=>t.event.__typename==="CompanyEarning"&&(_(t==null?void 0:t.date).isAfter(E)||_(t==null?void 0:t.date).isSame(E)||_(t==null?void 0:t.date).isBefore(R)||_(t==null?void 0:t.date).isSame(R))))==null?void 0:r.length)||0,caption:"Earnings"},stockDividend:{amount:((d=(o=(m=(p=f.watchlist)==null?void 0:p.calendarEvents)==null?void 0:m.nodes)==null?void 0:o.filter(t=>t.event.__typename==="StockDividend"&&(_(t==null?void 0:t.date).isAfter(E)||_(t==null?void 0:t.date).isSame(E)||_(t==null?void 0:t.date).isBefore(R)||_(t==null?void 0:t.date).isSame(R))))==null?void 0:d.length)||0,caption:"Dividends"}}});P(!1);const z={BULLISH:"text-green",NEUTRAL:"text-grey-white",BEARISH:"text-red"},W={BULLISH:"green",NEUTRAL:"grey",BEARISH:"red"},q={BULLISH:"green",NEUTRAL:"grey",BEARISH:"#f76a63"},h={buysCount:{color:"#e4fae0",borderColor:"#28A946",text:"Buys"},holdsCount:{color:"#dbdde4",borderColor:"#9191B1",text:"Holds"},sellsCount:{color:"#ffdad8",borderColor:"#FF342A",text:"Sells"}},$={name:"Sector",type:"pie",radius:["55%","100%"],top:"5%",bottom:"5%",label:{show:!1,position:"center",formatter:s=>`{percentageNumber|${ht(s.percent,0,1)}}{percentageSign|%}
{name|${s.data.name}}`,fontSize:12,fontWeight:600,fontFamily:"Inter",rich:{percentageNumber:{fontFamily:"Inter",fontSize:15,fontWeight:700,padding:[1,0,2,3]},percentageSign:{fontFamily:"Inter",padding:[2,0,0,1],fontWeight:500,fontSize:12}}},emphasis:{label:{show:!0,fontWeight:"bold"}},data:[{value:0,name:"Buys",itemStyle:{color:"#e4fae0",borderColor:"#28A946",borderWidth:1}},{value:0,name:"Holds",itemStyle:{color:"#dbdde4",borderColor:"#9191B1",borderWidth:1}},{value:0,name:"Sells",itemStyle:{color:"#ffdad8",borderColor:"#FF342A",borderWidth:1}}]},Q=I(()=>{var s,i,c,r,p,m,o,d,t;return $.data[0].value=(c=(i=(s=f.watchlist)==null?void 0:s.stocksAggregate)==null?void 0:i.analystRatings)==null?void 0:c.buysCount,$.data[1].value=(m=(p=(r=f.watchlist)==null?void 0:r.stocksAggregate)==null?void 0:p.analystRatings)==null?void 0:m.holdsCount,$.data[2].value=(t=(d=(o=f.watchlist)==null?void 0:o.stocksAggregate)==null?void 0:d.analystRatings)==null?void 0:t.sellsCount,$}),K=s=>{J.openConfirmDeleteWatchlist(!0,s)},l=(s,i)=>[Math.floor(s*(i-1))];return(s,i)=>{var d,t,M,tt,st,et,at,lt,ot,it,nt;const c=vt,r=jt,p=Dt,m=Ht,o=Ft;return n(),u("div",Ut,[a("h2",Gt,[a("span",{class:"rounded-full w-[10px] h-[10px]",style:mt(`background: ${(d=s.watchlist)==null?void 0:d.color}`)},null,4),S(" "+y((t=s.watchlist)==null?void 0:t.name),1)]),a("div",Jt,[a("div",Qt,[a("div",{class:w(["py-4 w-full md:border-r md:border-mischka flex flex-col justify-center",`${T} ${Y}`])},[a("p",Kt,y((M=s.watchlist)==null?void 0:M.stocksCount),1),Xt],2),a("div",{class:w(["flex items-center pt-5 pb-4 gap-3",`${T} ${Z} ${ct}`])},[(n(!0),u(F,null,U(b.value,(e,x,v)=>(n(),u("div",{class:"flex flex-col flex-grow",key:v},[a("span",Yt,[Zt,S(" "+y(e.amount),1)]),a("span",Nt,y(e==null?void 0:e.caption),1),a("span",{class:"text-[9px] text-light-gray-small-caption"},"Next "+y(pt)+" days")]))),128))],2)]),a("div",{class:w(["border-t border-mischka py-3 flex flex-wrap gap-y-2.5 mb-4",T])},[Mt,(n(!0),u(F,null,U((st=(tt=s.watchlist)==null?void 0:tt.stocksAggregate)==null?void 0:st.movers,(e,x)=>{var v;return n(),G(c,{to:`/company${(e==null?void 0:e.securityType)==="ETF"?"-etf":""}/${(v=e==null?void 0:e.symbol)==null?void 0:v.toLowerCase()}`,class:w(["flex flex-wrap md:flex-nowrap gap-3 items-center text-sm rounded-xl",x%2===0?Y:Z]),key:x},{default:X(()=>{var j,D,H,rt;return[a("span",{class:w(["flex flex-wrap md:flex-nowrap gap-3 items-center text-sm rounded-md watchlist-card-mover-stock",x%2===0?"md:pr-[20px]":us])},[a("img",{width:"30",class:"rounded-md object-contain w-[30px]",src:B.value?e==null?void 0:e.lightLogo:e==null?void 0:e.darkLogo,alt:e==null?void 0:e.symbol},null,8,ts),a("span",ss,y(e==null?void 0:e.symbol),1),a("span",es,y(e==null?void 0:e.name),1),a("span",{class:w(["text-xs font-medium",((D=(j=e==null?void 0:e.quote)==null?void 0:j.changePercent)==null?void 0:D.trendDirection)==="POSITIVE"?"text-green":"text-red"])},y((rt=(H=e==null?void 0:e.quote)==null?void 0:H.changePercent)==null?void 0:rt.displayAmount),3)],2)]}),_:2},1032,["to","class"])}),128))]),a("div",as,[a("div",{class:w(["w-full md:border-r md:border-mischka pt-5 pb-8 flex flex-col justify-center",`${T} ${Y}`])},[ls,a("div",os,[L(r,{class:"w-full h-[185px] md:h-[145px] md:w-[145px]",data:Q.value},null,8,["data"]),a("div",is,[(n(!0),u(F,null,U((at=(et=s.watchlist)==null?void 0:et.stocksAggregate)==null?void 0:at.analystRatings,(e,x,v)=>{var j,D,H;return n(),u("div",ns,[a("div",{class:"border w-[19px] h-[17px]",style:mt(`border-color: ${(j=h[x])==null?void 0:j.borderColor}; background-color: ${(D=h[x])==null?void 0:D.color}`)},null,4),a("span",rs,y(e+" "+((H=h[x])==null?void 0:H.text)),1)])}),256))])])],2),a("div",{class:w(["w-full my-5 md:pr-10",`${T} ${Z} ${ct}`])},[ms,a("div",cs,[L(p,{class:"w-full h-[220px] md:h-[170px] md:max-w-[170px]","is-split-area-transparent":!0,"area-color":q[A.value],"line-color":q[A.value],"axis-color":"#6A38EB","split-number":3,"symbol-size":6,"data-value":C(xt)(((ot=(lt=s.watchlist)==null?void 0:lt.stocksAggregate)==null?void 0:ot.dimensionalAlignments)||[]),radius:"75%",max:100,"custom-indicator-labels":{sentimentLabel:"ST",dividends:"DIV",cashManagement:"CM",structure:"STR",marketDynamics:"MD",operations:"OPS",valuation:"VAL"},"indicator-font-size":8,"indicator-indent":9},null,8,["area-color","line-color","data-value"]),g.value&&!isNaN(g.value)?(n(),G(o,{key:0,class:"mb-1.5 inline-block",boxLength:8,color:W[A.value],activeBoxes:l(g.value/100,8),layout:"small"},{default:X(()=>[a("p",{class:w(["font-bold mb-2 text-[12px] md:text-[10px]",z[A.value]])},y(Math.floor(g.value))+"% Total Alignment",3),a("div",ps,[L(m,{class:"text-primary-black w-[11px]",name:"img/pages/company/bear-black"}),L(m,{class:"text-primary-black w-[11px]",name:"img/pages/company/bull"})])]),_:1},8,["color","activeBoxes"])):k("",!0)])],2)]),a("div",{class:w(["border-t border-mischka flex justify-between flex-wrap gap-4 py-[20px]",T])},[L(c,{to:`/watchlist/${C(dt)(((it=s.watchlist)==null?void 0:it.name)||"")}`,class:"text-sm font-bold text-primary"},{default:X(()=>[S("View Watchlist >")]),_:1},8,["to"]),(nt=s.watchlist)!=null&&nt.id?(n(),u("button",{key:0,class:"text-sm text-time-grey flex items-center gap-1.5",onClick:i[0]||(i[0]=e=>{var x;return K((x=s.watchlist)==null?void 0:x.id)})},[ds,S(" Remove Watchlist ")])):k("",!0)])])])}}}),gs={key:0,class:"max-w-[1492px] mx-auto"},xs={key:1,class:"flex justify-center"},hs={key:2,class:"relative min-h-[250px]"},_s={key:0,class:"absolute top-0 left-0 w-full h-full z-[100] flex justify-center bg-silver opacity-90"},ys={key:1,class:"grid grid-cols-1 xl:grid-cols-2 gap-8 lg:gap-5 xl:gap-8"},ae=ut({__name:"index",setup(N){const f=P(!0),O=P(!1),B=At(),J=_t(),g=ft(),A=yt(),E=Tt(),R=P({}),b=$t(),z=Lt(),W=I(()=>B.getUserPlan),q=I(()=>g.getConfirmDeleteWatchlist),h=P({active:"components-section",items:[{id:"components-section",title:"Components",query:"components-section",active:!0},{id:"news",title:"News",query:"news",active:!1},{id:"competitors",title:"Competitors",query:"competitors",active:!1},{id:"equityset-analysis",title:"Position Analysis",query:"equityset-analysis",premium:W.value===0},{id:"metric-comparisons",title:"Metric Comparisons",query:"metric-comparisons",premium:W.value===0},{id:"alignment-analysis",title:"Alignment Analysis",query:"alignment-analysis",premium:W.value===0}]}),$=P([]),Q=async()=>{var s,i,c;const l=(s=b.query)!=null&&s.index&&typeof((i=b.query)==null?void 0:i.index)=="string"?parseInt((c=b.query)==null?void 0:c.index):void 0;B.getIsLoggedIn&&(await B.fetchWatchlistUsage().then(({billingUserWatchlistUsage:r})=>{var p,m;if(l){const o=(m=(p=r==null?void 0:r.watchlists)==null?void 0:p.nodes)==null?void 0:m.at(l);z.push(`/watchlist/${dt((o==null?void 0:o.name)||"not-found")}`)}}),g.fetchWatchlists())},K=l=>{O.value=l};return Bt(()=>{var l,s;parseInt(((s=(l=b.query)==null?void 0:l.refresh)==null?void 0:s.toString())||"0")===1?z.push(b.path):wt({title:"Watchlists",description:"Collections of stocks you wish to keep track"},b.fullPath),g.$reset(),A.stocksComponents={}}),It(()=>{Et(()=>{Ot(h.value.items,h.value.active,"tag",b),h.value.items=zt.value,h.value.active=St.value,h.value.items[Vt.value].active=!0});const l=localStorage.getItem("is-user-auth")||"false";J.setGatedModalState(!JSON.parse(l))}),V(()=>B.getIsLoggedIn,Q,{immediate:!0}),V(()=>g.getWatchlist,async l=>{l&&(R.value=l,f.value=!1)}),V(()=>g.getWatchlists,l=>{l&&(l==null?void 0:l.length)>0&&($.value=l,f.value=!1)}),V(()=>W.value,async l=>{h.value.items.forEach(s=>s.premium=l===0)}),Rt(()=>{E.$reset(),A.stocksComponents={},A.resetCompaniesAlignmentCardsData()}),(l,s)=>{var m;const i=Pt,c=qt,r=Wt,p=fs;return C(B).getIsLoggedIn?(n(),u("div",gs,[a("div",null,[C(q).open?(n(),G(i,{key:0,id:C(q).id},null,8,["id"])):k("",!0),L(c,{class:"mb-14",onChangeActiveWatchlist:s[0]||(s[0]=o=>K(o))}),C(f)?(n(),u("div",xs,[L(r)])):(n(),u("div",hs,[C(O)?(n(),u("div",_s,[L(r,{class:"mt-20"})])):((m=C($))==null?void 0:m.length)>0?(n(),u("div",ys,[(n(!0),u(F,null,U(C($),(o,d)=>{var t;return n(),u(F,null,[(((t=o==null?void 0:o.stocks)==null?void 0:t.length)>0,n(),G(p,{watchlist:o,key:d},null,8,["watchlist"]))],64)}),256))])):k("",!0)]))])])):k("",!0)}}});export{ae as default};